let e;function t(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var i,n,r,o,s,a,l,_,c,h,u,d,b=globalThis,f={},p={},m=b.parcelRequire49ed;null==m&&((m=function(e){if(e in f)return f[e].exports;if(e in p){var t=p[e];delete p[e];var i={id:e,exports:{}};return f[e]=i,t.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){p[e]=t},b.parcelRequire49ed=m);var g=m.register;g("dgAuU",function(e,i){t(e.exports,"SIZEOF_SHORT",()=>m("fQbsP").SIZEOF_SHORT),t(e.exports,"SIZEOF_INT",()=>m("fQbsP").SIZEOF_INT),t(e.exports,"FILE_IDENTIFIER_LENGTH",()=>m("fQbsP").FILE_IDENTIFIER_LENGTH),t(e.exports,"SIZE_PREFIX_LENGTH",()=>m("fQbsP").SIZE_PREFIX_LENGTH),t(e.exports,"int32",()=>m("1k22A").int32),t(e.exports,"float32",()=>m("1k22A").float32),t(e.exports,"float64",()=>m("1k22A").float64),t(e.exports,"isLittleEndian",()=>m("1k22A").isLittleEndian),t(e.exports,"Encoding",()=>m("joNij").Encoding),t(e.exports,"Builder",()=>m("82iZG").Builder),t(e.exports,"ByteBuffer",()=>m("fL8AT").ByteBuffer),m("fQbsP"),m("1k22A"),m("joNij"),m("82iZG"),m("fL8AT")}),g("fQbsP",function(e,i){t(e.exports,"SIZEOF_SHORT",()=>n),t(e.exports,"SIZEOF_INT",()=>r),t(e.exports,"FILE_IDENTIFIER_LENGTH",()=>o),t(e.exports,"SIZE_PREFIX_LENGTH",()=>s);let n=2,r=4,o=4,s=4}),g("1k22A",function(e,i){t(e.exports,"int32",()=>n),t(e.exports,"float32",()=>r),t(e.exports,"float64",()=>o),t(e.exports,"isLittleEndian",()=>s);let n=new Int32Array(2),r=new Float32Array(n.buffer),o=new Float64Array(n.buffer),s=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]}),g("joNij",function(e,i){var n,r;t(e.exports,"Encoding",()=>n),(r=n||(n={}))[r.UTF8_BYTES=1]="UTF8_BYTES",r[r.UTF16_STRING=2]="UTF16_STRING"}),g("82iZG",function(e,i){t(e.exports,"Builder",()=>o);var n=m("fL8AT"),r=m("fQbsP");class o{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=n.ByteBuffer.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);let i=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<i+e+t;){let e=this.bb.capacity();this.bb=o.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){let t=e.capacity();if(0xc0000000&t)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let i=t<<1,r=n.ByteBuffer.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-e+r.SIZEOF_INT)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let e=this.offset(),t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);let i=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);let n=(i+2)*r.SIZEOF_SHORT;this.addInt16(n);let o=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){let e=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(e)){for(let t=r.SIZEOF_SHORT;t<n;t+=r.SIZEOF_SHORT)if(this.bb.readInt16(s+t)!=this.bb.readInt16(e+t))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){let n=i?r.SIZE_PREFIX_LENGTH:0;if(t){if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+n),t.length!=r.FILE_IDENTIFIER_LENGTH)throw TypeError("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(let e=r.FILE_IDENTIFIER_LENGTH-1;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,r.SIZEOF_INT+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){let i=this.bb.capacity()-e,n=i-this.bb.readInt32(i);if(!(t<this.bb.readInt16(n)&&0!=this.bb.readInt16(n+t)))throw TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(r.SIZEOF_INT,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);let t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){let t;return null==e?0:(t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createByteVector(e){return null==e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){let t=[];for(let i=0;i<e.length;++i){let n=e[i];if(null!==n)t.push(this.createObjectOffset(n));else throw TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}}),g("fL8AT",function(e,i){t(e.exports,"ByteBuffer",()=>s);var n=m("fQbsP"),r=m("1k22A"),o=m("joNij");class s{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new s(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return r.int32[0]=this.readInt32(e),r.float32[0]}readFloat64(e){return r.int32[+!r.isLittleEndian]=this.readInt32(e),r.int32[+!!r.isLittleEndian]=this.readInt32(e+4),r.float64[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){r.float32[0]=t,this.writeInt32(e,r.int32[0])}writeFloat64(e,t){r.float64[0]=t,this.writeInt32(e,r.int32[+!r.isLittleEndian]),this.writeInt32(e+4,r.int32[+!!r.isLittleEndian])}getBufferIdentifier(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+t));return e}__offset(e,t){let i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);let i=this.readInt32(e);e+=n.SIZEOF_INT;let r=this.bytes_.subarray(e,e+i);return t===o.Encoding.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+n.SIZEOF_INT}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(let t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+n.SIZEOF_INT+t))return!1;return!0}createScalarList(e,t){let i=[];for(let n=0;n<t;++n){let t=e(n);null!==t&&i.push(t)}return i}createObjList(e,t){let i=[];for(let n=0;n<t;++n){let t=e(n);null!==t&&i.push(t.unpack())}return i}}});var w={};i=function(e){function t(e,t,i){this.obj=e,this.left=null,this.right=null,this.parent=i,this.dimension=t}function i(e){this.content=[],this.scoreFunction=e}i.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},peek:function(){return this.content[0]},remove:function(e){for(var t=this.content.length,i=0;i<t;i++)if(this.content[i]==e){var n=this.content.pop();i!=t-1&&(this.content[i]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.bubbleUp(i):this.sinkDown(i));return}throw Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];e>0;){var i=Math.floor((e+1)/2)-1,n=this.content[i];if(this.scoreFunction(t)<this.scoreFunction(n))this.content[i]=t,this.content[e]=n,e=i;else break}},sinkDown:function(e){for(var t=this.content.length,i=this.content[e],n=this.scoreFunction(i);;){var r=(e+1)*2,o=r-1,s=null;if(o<t){var a=this.content[o],l=this.scoreFunction(a);l<n&&(s=o)}if(r<t){var _=this.content[r];this.scoreFunction(_)<(null==s?n:l)&&(s=r)}if(null!=s)this.content[e]=this.content[s],this.content[s]=i,e=s;else break}}},e.kdTree=function(e,n,r){var o=this;Array.isArray(e)?this.root=function e(i,n,o){var s,a,l=n%r.length;return 0===i.length?null:1===i.length?new t(i[0],l,o):(i.sort(function(e,t){return e[r[l]]-t[r[l]]}),s=Math.floor(i.length/2),(a=new t(i[s],l,o)).left=e(i.slice(0,s),n+1,a),a.right=e(i.slice(s+1),n+1,a),a)}(e,0,null):(o.root=e,function e(t){t.left&&(t.left.parent=t,e(t.left)),t.right&&(t.right.parent=t,e(t.right))}(o.root)),this.toJSON=function(e){e||(e=this.root);var i=new t(e.obj,e.dimension,null);return e.left&&(i.left=o.toJSON(e.left)),e.right&&(i.right=o.toJSON(e.right)),i},this.insert=function(e){var i,n,o=function t(i,n){if(null===i)return n;var o=r[i.dimension];return e[o]<i.obj[o]?t(i.left,i):t(i.right,i)}(this.root,null);if(null===o){this.root=new t(e,0,null);return}i=new t(e,(o.dimension+1)%r.length,o),e[n=r[o.dimension]]<o.obj[n]?o.left=i:o.right=i},this.remove=function(e){var t;null!==(t=function t(i){if(null===i)return null;if(i.obj===e)return i;var n=r[i.dimension];return e[n]<i.obj[n]?t(i.left,i):t(i.right,i)}(o.root))&&function e(t){var i,n,s;function a(e,t){var i,n,o,s,l;return null===e?null:(i=r[t],e.dimension===t)?null!==e.left?a(e.left,t):e:(n=e.obj[i],o=a(e.left,t),s=a(e.right,t),l=e,null!==o&&o.obj[i]<n&&(l=o),null!==s&&s.obj[i]<l.obj[i]&&(l=s),l)}if(null===t.left&&null===t.right){if(null===t.parent){o.root=null;return}s=r[t.parent.dimension],t.obj[s]<t.parent.obj[s]?t.parent.left=null:t.parent.right=null;return}null!==t.right?(n=(i=a(t.right,t.dimension)).obj,e(i)):(n=(i=a(t.left,t.dimension)).obj,e(i),t.right=t.left,t.left=null),t.obj=n}(t)},this.nearest=function(e,t,s){var a,l,_;if(_=new i(function(e){return-e[1]}),s)for(a=0;a<t;a+=1)_.push([null,s]);for(o.root&&function i(o){var s,a,l,c,h=r[o.dimension],u=n(e,o.obj),d={};function b(e,i){_.push([e,i]),_.size()>t&&_.pop()}for(c=0;c<r.length;c+=1)c===o.dimension?d[r[c]]=e[r[c]]:d[r[c]]=o.obj[r[c]];if(a=n(d,o.obj),null===o.right&&null===o.left){(_.size()<t||u<_.peek()[1])&&b(o,u);return}i(s=null===o.right?o.left:null===o.left?o.right:e[h]<o.obj[h]?o.left:o.right),(_.size()<t||u<_.peek()[1])&&b(o,u),(_.size()<t||Math.abs(a)<_.peek()[1])&&null!==(l=s===o.left?o.right:o.left)&&i(l)}(o.root),l=[],a=0;a<Math.min(t,_.content.length);a+=1)_.content[a][0]&&l.push([_.content[a][0].obj,_.content[a][1]]);return l},this.balanceFactor=function(){return function e(t){return null===t?0:Math.max(e(t.left),e(t.right))+1}(o.root)/(Math.log(function e(t){return null===t?0:e(t.left)+e(t.right)+1}(o.root))/Math.log(2))}},e.BinaryHeap=i},"function"==typeof define&&define.amd?define(["exports"],i):i(w);var v={},I=v&&v.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0}),v.fetchWeatherApi=function(e,t){return I(this,arguments,void 0,function*(e,t,i=3,n=.2,r=2,o={}){let s=new URLSearchParams(t);s.set("format","flatbuffers");let a=yield function(e){return I(this,arguments,void 0,function*(e,t=3,i=.5,n=2,r={}){let o=[500,502,504],s=0,a=yield fetch(e,r);for(;o.includes(a.status);){if(++s>=t)throw Error(a.statusText);let o=1e3*Math.min(i*Math.pow(2,s),n);yield V(o),a=yield fetch(e,r)}if([400,429].includes(a.status)){let e=yield a.json();if("reason"in e)throw Error(e.reason);throw Error(a.statusText)}return a})}(`${e}?${s.toString()}`,i,n,r,o),l=new y.ByteBuffer(new Uint8Array((yield a.arrayBuffer()))),_=[],c=0;for(;c<l.capacity();){l.setPosition(c);let e=l.readInt32(l.position());_.push(E.WeatherApiResponse.getSizePrefixedRootAsWeatherApiResponse(l)),c+=e+4}return _})},m("dgAuU");var y=m("fL8AT"),E={},x=E&&E.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),F=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),T=E&&E.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=n(e),r=0;r<i.length;r++)"default"!==i[r]&&x(t,e,i[r]);return F(t,e),t});Object.defineProperty(E,"__esModule",{value:!0}),E.WeatherApiResponse=void 0;const M=T(m("dgAuU"));var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.Model=void 0,(r=c||(S.Model=c={}))[r.undefined=0]="undefined",r[r.best_match=1]="best_match",r[r.gfs_seamless=2]="gfs_seamless",r[r.gfs_global=3]="gfs_global",r[r.gfs_hrrr=4]="gfs_hrrr",r[r.meteofrance_seamless=5]="meteofrance_seamless",r[r.meteofrance_arpege_seamless=6]="meteofrance_arpege_seamless",r[r.meteofrance_arpege_world=7]="meteofrance_arpege_world",r[r.meteofrance_arpege_europe=8]="meteofrance_arpege_europe",r[r.meteofrance_arome_seamless=9]="meteofrance_arome_seamless",r[r.meteofrance_arome_france=10]="meteofrance_arome_france",r[r.meteofrance_arome_france_hd=11]="meteofrance_arome_france_hd",r[r.jma_seamless=12]="jma_seamless",r[r.jma_msm=13]="jma_msm",r[r.jms_gsm=14]="jms_gsm",r[r.jma_gsm=15]="jma_gsm",r[r.gem_seamless=16]="gem_seamless",r[r.gem_global=17]="gem_global",r[r.gem_regional=18]="gem_regional",r[r.gem_hrdps_continental=19]="gem_hrdps_continental",r[r.icon_seamless=20]="icon_seamless",r[r.icon_global=21]="icon_global",r[r.icon_eu=22]="icon_eu",r[r.icon_d2=23]="icon_d2",r[r.ecmwf_ifs04=24]="ecmwf_ifs04",r[r.metno_nordic=25]="metno_nordic",r[r.era5_seamless=26]="era5_seamless",r[r.era5=27]="era5",r[r.cerra=28]="cerra",r[r.era5_land=29]="era5_land",r[r.ecmwf_ifs=30]="ecmwf_ifs",r[r.gwam=31]="gwam",r[r.ewam=32]="ewam",r[r.glofas_seamless_v3=33]="glofas_seamless_v3",r[r.glofas_forecast_v3=34]="glofas_forecast_v3",r[r.glofas_consolidated_v3=35]="glofas_consolidated_v3",r[r.glofas_seamless_v4=36]="glofas_seamless_v4",r[r.glofas_forecast_v4=37]="glofas_forecast_v4",r[r.glofas_consolidated_v4=38]="glofas_consolidated_v4",r[r.gfs025=39]="gfs025",r[r.gfs05=40]="gfs05",r[r.CMCC_CM2_VHR4=41]="CMCC_CM2_VHR4",r[r.FGOALS_f3_H_highresSST=42]="FGOALS_f3_H_highresSST",r[r.FGOALS_f3_H=43]="FGOALS_f3_H",r[r.HiRAM_SIT_HR=44]="HiRAM_SIT_HR",r[r.MRI_AGCM3_2_S=45]="MRI_AGCM3_2_S",r[r.EC_Earth3P_HR=46]="EC_Earth3P_HR",r[r.MPI_ESM1_2_XR=47]="MPI_ESM1_2_XR",r[r.NICAM16_8S=48]="NICAM16_8S",r[r.cams_europe=49]="cams_europe",r[r.cams_global=50]="cams_global",r[r.cfsv2=51]="cfsv2",r[r.era5_ocean=52]="era5_ocean",r[r.cma_grapes_global=53]="cma_grapes_global",r[r.bom_access_global=54]="bom_access_global",r[r.bom_access_global_ensemble=55]="bom_access_global_ensemble",r[r.arpae_cosmo_seamless=56]="arpae_cosmo_seamless",r[r.arpae_cosmo_2i=57]="arpae_cosmo_2i",r[r.arpae_cosmo_2i_ruc=58]="arpae_cosmo_2i_ruc",r[r.arpae_cosmo_5m=59]="arpae_cosmo_5m",r[r.ecmwf_ifs025=60]="ecmwf_ifs025",r[r.ecmwf_aifs025=61]="ecmwf_aifs025",r[r.gfs013=62]="gfs013",r[r.gfs_graphcast025=63]="gfs_graphcast025",r[r.ecmwf_wam025=64]="ecmwf_wam025",r[r.meteofrance_wave=65]="meteofrance_wave",r[r.meteofrance_currents=66]="meteofrance_currents",r[r.ecmwf_wam025_ensemble=67]="ecmwf_wam025_ensemble",r[r.ncep_gfswave025=68]="ncep_gfswave025",r[r.ncep_gefswave025=69]="ncep_gefswave025",r[r.knmi_seamless=70]="knmi_seamless",r[r.knmi_harmonie_arome_europe=71]="knmi_harmonie_arome_europe",r[r.knmi_harmonie_arome_netherlands=72]="knmi_harmonie_arome_netherlands",r[r.dmi_seamless=73]="dmi_seamless",r[r.dmi_harmonie_arome_europe=74]="dmi_harmonie_arome_europe",r[r.metno_seamless=75]="metno_seamless",r[r.era5_ensemble=76]="era5_ensemble",r[r.ecmwf_ifs_analysis=77]="ecmwf_ifs_analysis",r[r.ecmwf_ifs_long_window=78]="ecmwf_ifs_long_window",r[r.ecmwf_ifs_analysis_long_window=79]="ecmwf_ifs_analysis_long_window",r[r.ukmo_global_deterministic_10km=80]="ukmo_global_deterministic_10km",r[r.ukmo_uk_deterministic_2km=81]="ukmo_uk_deterministic_2km",r[r.ukmo_seamless=82]="ukmo_seamless",r[r.ncep_gfswave016=83]="ncep_gfswave016",r[r.ncep_nbm_conus=84]="ncep_nbm_conus",r[r.ukmo_global_ensemble_20km=85]="ukmo_global_ensemble_20km",r[r.ecmwf_aifs025_single=86]="ecmwf_aifs025_single",r[r.jma_jaxa_himawari=87]="jma_jaxa_himawari",r[r.eumetsat_sarah3=88]="eumetsat_sarah3",r[r.eumetsat_lsa_saf_msg=89]="eumetsat_lsa_saf_msg",r[r.eumetsat_lsa_saf_iodc=90]="eumetsat_lsa_saf_iodc",r[r.satellite_radiation_seamless=91]="satellite_radiation_seamless",r[r.kma_gdps=92]="kma_gdps",r[r.kma_ldps=93]="kma_ldps";var O={},j=O&&O.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),N=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),P=O&&O.__importStar||(o=function(e){return(o=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=o(e),n=0;n<i.length;n++)"default"!==i[n]&&j(t,e,i[n]);return N(t,e),t});Object.defineProperty(O,"__esModule",{value:!0}),O.VariablesWithTime=void 0;const k=P(m("dgAuU"));var A={},L=A&&A.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),B=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),R=A&&A.__importStar||(s=function(e){return(s=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=s(e),n=0;n<i.length;n++)"default"!==i[n]&&L(t,e,i[n]);return B(t,e),t});Object.defineProperty(A,"__esModule",{value:!0}),A.VariableWithValues=void 0;const q=R(m("dgAuU"));var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.Aggregation=void 0,(a=h||(D.Aggregation=h={}))[a.none=0]="none",a[a.minimum=1]="minimum",a[a.maximum=2]="maximum",a[a.mean=3]="mean",a[a.p10=4]="p10",a[a.p25=5]="p25",a[a.median=6]="median",a[a.p75=7]="p75",a[a.p90=8]="p90",a[a.dominant=9]="dominant",a[a.sum=10]="sum",a[a.spread=11]="spread";var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.Unit=void 0,(l=u||(U.Unit=u={}))[l.undefined=0]="undefined",l[l.celsius=1]="celsius",l[l.centimetre=2]="centimetre",l[l.cubic_metre_per_cubic_metre=3]="cubic_metre_per_cubic_metre",l[l.cubic_metre_per_second=4]="cubic_metre_per_second",l[l.degree_direction=5]="degree_direction",l[l.dimensionless_integer=6]="dimensionless_integer",l[l.dimensionless=7]="dimensionless",l[l.european_air_quality_index=8]="european_air_quality_index",l[l.fahrenheit=9]="fahrenheit",l[l.feet=10]="feet",l[l.fraction=11]="fraction",l[l.gdd_celsius=12]="gdd_celsius",l[l.geopotential_metre=13]="geopotential_metre",l[l.grains_per_cubic_metre=14]="grains_per_cubic_metre",l[l.gram_per_kilogram=15]="gram_per_kilogram",l[l.hectopascal=16]="hectopascal",l[l.hours=17]="hours",l[l.inch=18]="inch",l[l.iso8601=19]="iso8601",l[l.joule_per_kilogram=20]="joule_per_kilogram",l[l.kelvin=21]="kelvin",l[l.kilopascal=22]="kilopascal",l[l.kilogram_per_square_metre=23]="kilogram_per_square_metre",l[l.kilometres_per_hour=24]="kilometres_per_hour",l[l.knots=25]="knots",l[l.megajoule_per_square_metre=26]="megajoule_per_square_metre",l[l.metre_per_second_not_unit_converted=27]="metre_per_second_not_unit_converted",l[l.metre_per_second=28]="metre_per_second",l[l.metre=29]="metre",l[l.micrograms_per_cubic_metre=30]="micrograms_per_cubic_metre",l[l.miles_per_hour=31]="miles_per_hour",l[l.millimetre=32]="millimetre",l[l.pascal=33]="pascal",l[l.per_second=34]="per_second",l[l.percentage=35]="percentage",l[l.seconds=36]="seconds",l[l.unix_time=37]="unix_time",l[l.us_air_quality_index=38]="us_air_quality_index",l[l.watt_per_square_metre=39]="watt_per_square_metre",l[l.wmo_code=40]="wmo_code",l[l.parts_per_million=41]="parts_per_million";var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.Variable=void 0,(_=d||(H.Variable=d={}))[_.undefined=0]="undefined",_[_.apparent_temperature=1]="apparent_temperature",_[_.cape=2]="cape",_[_.cloud_cover=3]="cloud_cover",_[_.cloud_cover_high=4]="cloud_cover_high",_[_.cloud_cover_low=5]="cloud_cover_low",_[_.cloud_cover_mid=6]="cloud_cover_mid",_[_.daylight_duration=7]="daylight_duration",_[_.dew_point=8]="dew_point",_[_.diffuse_radiation=9]="diffuse_radiation",_[_.diffuse_radiation_instant=10]="diffuse_radiation_instant",_[_.direct_normal_irradiance=11]="direct_normal_irradiance",_[_.direct_normal_irradiance_instant=12]="direct_normal_irradiance_instant",_[_.direct_radiation=13]="direct_radiation",_[_.direct_radiation_instant=14]="direct_radiation_instant",_[_.et0_fao_evapotranspiration=15]="et0_fao_evapotranspiration",_[_.evapotranspiration=16]="evapotranspiration",_[_.freezing_level_height=17]="freezing_level_height",_[_.growing_degree_days=18]="growing_degree_days",_[_.is_day=19]="is_day",_[_.latent_heat_flux=20]="latent_heat_flux",_[_.leaf_wetness_probability=21]="leaf_wetness_probability",_[_.lifted_index=22]="lifted_index",_[_.lightning_potential=23]="lightning_potential",_[_.precipitation=24]="precipitation",_[_.precipitation_hours=25]="precipitation_hours",_[_.precipitation_probability=26]="precipitation_probability",_[_.pressure_msl=27]="pressure_msl",_[_.rain=28]="rain",_[_.relative_humidity=29]="relative_humidity",_[_.runoff=30]="runoff",_[_.sensible_heat_flux=31]="sensible_heat_flux",_[_.shortwave_radiation=32]="shortwave_radiation",_[_.shortwave_radiation_instant=33]="shortwave_radiation_instant",_[_.showers=34]="showers",_[_.snow_depth=35]="snow_depth",_[_.snow_height=36]="snow_height",_[_.snowfall=37]="snowfall",_[_.snowfall_height=38]="snowfall_height",_[_.snowfall_water_equivalent=39]="snowfall_water_equivalent",_[_.sunrise=40]="sunrise",_[_.sunset=41]="sunset",_[_.soil_moisture=42]="soil_moisture",_[_.soil_moisture_index=43]="soil_moisture_index",_[_.soil_temperature=44]="soil_temperature",_[_.surface_pressure=45]="surface_pressure",_[_.surface_temperature=46]="surface_temperature",_[_.temperature=47]="temperature",_[_.terrestrial_radiation=48]="terrestrial_radiation",_[_.terrestrial_radiation_instant=49]="terrestrial_radiation_instant",_[_.total_column_integrated_water_vapour=50]="total_column_integrated_water_vapour",_[_.updraft=51]="updraft",_[_.uv_index=52]="uv_index",_[_.uv_index_clear_sky=53]="uv_index_clear_sky",_[_.vapour_pressure_deficit=54]="vapour_pressure_deficit",_[_.visibility=55]="visibility",_[_.weather_code=56]="weather_code",_[_.wind_direction=57]="wind_direction",_[_.wind_gusts=58]="wind_gusts",_[_.wind_speed=59]="wind_speed",_[_.vertical_velocity=60]="vertical_velocity",_[_.geopotential_height=61]="geopotential_height",_[_.wet_bulb_temperature=62]="wet_bulb_temperature",_[_.river_discharge=63]="river_discharge",_[_.wave_height=64]="wave_height",_[_.wave_period=65]="wave_period",_[_.wave_direction=66]="wave_direction",_[_.wind_wave_height=67]="wind_wave_height",_[_.wind_wave_period=68]="wind_wave_period",_[_.wind_wave_peak_period=69]="wind_wave_peak_period",_[_.wind_wave_direction=70]="wind_wave_direction",_[_.swell_wave_height=71]="swell_wave_height",_[_.swell_wave_period=72]="swell_wave_period",_[_.swell_wave_peak_period=73]="swell_wave_peak_period",_[_.swell_wave_direction=74]="swell_wave_direction",_[_.pm10=75]="pm10",_[_.pm2p5=76]="pm2p5",_[_.dust=77]="dust",_[_.aerosol_optical_depth=78]="aerosol_optical_depth",_[_.carbon_monoxide=79]="carbon_monoxide",_[_.nitrogen_dioxide=80]="nitrogen_dioxide",_[_.ammonia=81]="ammonia",_[_.ozone=82]="ozone",_[_.sulphur_dioxide=83]="sulphur_dioxide",_[_.alder_pollen=84]="alder_pollen",_[_.birch_pollen=85]="birch_pollen",_[_.grass_pollen=86]="grass_pollen",_[_.mugwort_pollen=87]="mugwort_pollen",_[_.olive_pollen=88]="olive_pollen",_[_.ragweed_pollen=89]="ragweed_pollen",_[_.european_aqi=90]="european_aqi",_[_.european_aqi_pm2p5=91]="european_aqi_pm2p5",_[_.european_aqi_pm10=92]="european_aqi_pm10",_[_.european_aqi_nitrogen_dioxide=93]="european_aqi_nitrogen_dioxide",_[_.european_aqi_ozone=94]="european_aqi_ozone",_[_.european_aqi_sulphur_dioxide=95]="european_aqi_sulphur_dioxide",_[_.us_aqi=96]="us_aqi",_[_.us_aqi_pm2p5=97]="us_aqi_pm2p5",_[_.us_aqi_pm10=98]="us_aqi_pm10",_[_.us_aqi_nitrogen_dioxide=99]="us_aqi_nitrogen_dioxide",_[_.us_aqi_ozone=100]="us_aqi_ozone",_[_.us_aqi_sulphur_dioxide=101]="us_aqi_sulphur_dioxide",_[_.us_aqi_carbon_monoxide=102]="us_aqi_carbon_monoxide",_[_.sunshine_duration=103]="sunshine_duration",_[_.convective_inhibition=104]="convective_inhibition",_[_.shortwave_radiation_clear_sky=105]="shortwave_radiation_clear_sky",_[_.global_tilted_irradiance=106]="global_tilted_irradiance",_[_.global_tilted_irradiance_instant=107]="global_tilted_irradiance_instant",_[_.ocean_current_velocity=108]="ocean_current_velocity",_[_.ocean_current_direction=109]="ocean_current_direction",_[_.cloud_base=110]="cloud_base",_[_.cloud_top=111]="cloud_top",_[_.mass_density=112]="mass_density",_[_.boundary_layer_height=113]="boundary_layer_height",_[_.formaldehyde=114]="formaldehyde",_[_.glyoxal=115]="glyoxal",_[_.non_methane_volatile_organic_compounds=116]="non_methane_volatile_organic_compounds",_[_.pm10_wildfires=117]="pm10_wildfires",_[_.peroxyacyl_nitrates=118]="peroxyacyl_nitrates",_[_.secondary_inorganic_aerosol=119]="secondary_inorganic_aerosol",_[_.residential_elementary_carbon=120]="residential_elementary_carbon",_[_.total_elementary_carbon=121]="total_elementary_carbon",_[_.pm2_5_total_organic_matter=122]="pm2_5_total_organic_matter",_[_.sea_salt_aerosol=123]="sea_salt_aerosol",_[_.nitrogen_monoxide=124]="nitrogen_monoxide",_[_.thunderstorm_probability=125]="thunderstorm_probability",_[_.rain_probability=126]="rain_probability",_[_.freezing_rain_probability=127]="freezing_rain_probability",_[_.ice_pellets_probability=128]="ice_pellets_probability",_[_.snowfall_probability=129]="snowfall_probability",_[_.carbon_dioxide=130]="carbon_dioxide",_[_.methane=131]="methane",_[_.sea_level_height_msl=132]="sea_level_height_msl",_[_.sea_surface_temperature=133]="sea_surface_temperature",_[_.invert_barometer_height=134]="invert_barometer_height",_[_.hail=135]="hail",_[_.albedo=136]="albedo",_[_.precipitation_type=137]="precipitation_type",_[_.convective_cloud_base=138]="convective_cloud_base",_[_.convective_cloud_top=139]="convective_cloud_top",_[_.snow_depth_water_equivalent=140]="snow_depth_water_equivalent";class C{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsVariableWithValues(e,t){return(t||new C).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsVariableWithValues(e,t){return e.setPosition(e.position()+q.SIZE_PREFIX_LENGTH),(t||new C).__init(e.readInt32(e.position())+e.position(),e)}variable(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):H.Variable.undefined}unit(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):U.Unit.undefined}value(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0}values(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+4*e):0}valuesLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}valuesArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}valuesInt64(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}valuesInt64Length(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}altitude(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt16(this.bb_pos+e):0}aggregation(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):D.Aggregation.none}pressureLevel(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt16(this.bb_pos+e):0}depth(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readInt16(this.bb_pos+e):0}depthTo(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt16(this.bb_pos+e):0}ensembleMember(){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.readInt16(this.bb_pos+e):0}previousDay(){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt16(this.bb_pos+e):0}}A.VariableWithValues=C;class z{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsVariablesWithTime(e,t){return(t||new z).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsVariablesWithTime(e,t){return e.setPosition(e.position()+k.SIZE_PREFIX_LENGTH),(t||new z).__init(e.readInt32(e.position())+e.position(),e)}time(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}timeEnd(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}interval(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0}variables(e,t){let i=this.bb.__offset(this.bb_pos,10);return i?(t||new A.VariableWithValues).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}variablesLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}}O.VariablesWithTime=z;class G{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsWeatherApiResponse(e,t){return(t||new G).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsWeatherApiResponse(e,t){return e.setPosition(e.position()+M.SIZE_PREFIX_LENGTH),(t||new G).__init(e.readInt32(e.position())+e.position(),e)}latitude(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0}longitude(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0}elevation(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0}generationTimeMilliseconds(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0}locationId(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}model(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint8(this.bb_pos+e):S.Model.undefined}utcOffsetSeconds(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0}timezone(e){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null}timezoneAbbreviation(e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null}current(e){let t=this.bb.__offset(this.bb_pos,22);return t?(e||new O.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}daily(e){let t=this.bb.__offset(this.bb_pos,24);return t?(e||new O.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}hourly(e){let t=this.bb.__offset(this.bb_pos,26);return t?(e||new O.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}minutely15(e){let t=this.bb.__offset(this.bb_pos,28);return t?(e||new O.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}sixHourly(e){let t=this.bb.__offset(this.bb_pos,30);return t?(e||new O.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}}E.WeatherApiResponse=G;const V=e=>new Promise(t=>setTimeout(t,e));let W=null,Z=null,$=null,X=null,Q=0,Y=0;function J(e,t){if(X&&Q===e&&Y===t)return X;console.log(`Creating new projection for ${e}x${t}`);let i=d3.geoMercator().scale(e/(2*Math.PI)).translate([e/2,t/2]),n={pixelToGeo:function(e,t){let[n,r]=i.invert([e,t]);return{latitude:r,longitude:n}},geoToPixel:function(e,t){let[n,r]=i([t,e]);return{x:n,y:r}}};return X=n,Q=e,Y=t,n}function K(){let e,t;W||(W=document.querySelector("#world-map")),Z||(Z=document.querySelector(".scale-bar")),$||($=document.querySelector(".scale-text"));let i=W,n=Z,r=$;if(!i||!n||!r)return;let o=i.getBoundingClientRect(),s=o.width,a=o.height,l=J(s,a),_=function(e,t,i,n,r){let o=r.pixelToGeo(i/2-50,t),s=r.pixelToGeo(i/2+50,t);return!o||!s||isNaN(o.latitude)||isNaN(s.latitude)?(console.warn("Scale bar position is off the projected map."),0):6371e3*d3.geoDistance([o.longitude,o.latitude],[s.longitude,s.latitude])}(100,.95*a,s,0,l);if(0===_){r.textContent="",n.style.width="0px";return}n.style.width="100px",_>=1e3?(e=Math.round(_/1e3),t="km"):(e=10*Math.round(_/10),t="m"),r.textContent=`${e} ${t}`}window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(K,100)}),document.addEventListener("DOMContentLoaded",()=>{W=document.querySelector("#world-map"),Z=document.querySelector(".scale-bar"),$=document.querySelector(".scale-text"),K()}),document.addEventListener("click",e=>{let t=W||document.querySelector("#world-map");if(!t)return;let i=t.getBoundingClientRect(),n=e.clientX-i.left,r=e.clientY-i.top,o=J(i.width,i.height).pixelToGeo(n,r);o&&!isNaN(o.latitude)?console.log(`click -> (${o.latitude.toFixed(3)}, ${o.longitude.toFixed(3)})`):console.log("Clicked outside projected area.")});let ee=[],et=null,ei=null;const en=Math.PI/180;function er(e,t){for(let i=0;i<e;i++)t.push({location:{latitude:180*Math.random()-90,longitude:360*Math.random()-180},current:{temperature2m:0,windSpeed10m:0,windDirection10m:0},computed:{opacity:.8,color:"rgba(255, 255, 255, 0.8)",tail:[]}})}const eo="weatherDataCache";let es=[],ea=null,el=null,e_=null;function ec(){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname}async function eh(e,t,i){let n=e.length,r=Math.ceil(n/i);for(let o=0;o<r;o++){let s=o*i,a=Math.min(s+i,n),l=e.slice(s,a),_=t.slice(s,a);await eu(l,_),K(),o<r-1&&await new Promise(e=>setTimeout(e,1200)),console.log(`Finished batch ${o+1} of ${r}.`)}console.log(`Finished fetching all ${n} points.`),ec()&&(console.log("Caching weather data..."),localStorage.setItem(eo,JSON.stringify({timestamp:Date.now(),data:es})))}async function eu(e,t){let i=await (0,v.fetchWeatherApi)("https://api.open-meteo.com/v1/forecast",{latitude:e,longitude:t,current:["temperature_2m","wind_speed_10m","wind_direction_10m"],models:"best_match"});for(let e=0;e<i.length;e++){let t=i[e],n=t.timezoneAbbreviation(),r=t.latitude(),o=t.longitude(),s=t.current(),a=s.variables(0).value(),l=s.variables(1).value(),_={current:{temperature2m:a,windSpeed10m:l,windDirection10m:s.variables(2).value()},location:{latitude:r,longitude:o,timezoneAbbreviation:n},computed:{opacity:Math.min(1,l/15).toString(),color:function(e){let t,i,n,r=Math.max(-15,Math.min(30,e));if(r>=15){let e=(r-15)/15;t=255,i=Math.round(255*(1-e)),n=Math.round(255*(1-e))}else{let e=(r+15)/30;t=Math.round(255*e),i=Math.round(255*e),n=255}return`rgb(${t}, ${i}, ${n})`}(a)}},c=_.location.latitude*Math.PI/180,h=_.location.longitude*Math.PI/180;_.x=+Math.cos(c)*Math.cos(h),_.y=+Math.cos(c)*Math.sin(h),_.z=+Math.sin(c),es.push(_)}}function ed(){return 0!==es.length&&es[0].hasOwnProperty("x")?(console.log("Building KDTree with geographic distance metric and data:",es),console.log("KDTree built with data:",e_=new(0,w.kdTree)(es,function(e,t){let i=e?.location?.latitude,n=e?.location?.longitude,r=t?.location?.latitude,o=t?.location?.longitude,s=i*Math.PI/180,a=n*Math.PI/180,l=r*Math.PI/180,_=o*Math.PI/180,c=Math.cos(s)*Math.cos(a)-Math.cos(l)*Math.cos(_),h=Math.cos(s)*Math.sin(a)-Math.cos(l)*Math.sin(_),u=Math.sin(s)-Math.sin(l);return Math.sqrt(c*c+h*h+u*u)},["x","y","z"])),e_):(console.log("Cannot build weather data tree: no data points available or missing x,y,z coords."),null)}function eb(){if(!ea||!el)return;let e=document.querySelector("#world-map");if(!e)return;let t=e.getBoundingClientRect();ea.width=t.width,ea.height=t.height,el.clearRect(0,0,ea.width,ea.height);let i=J(ea.width,ea.height);es.forEach(e=>{let{location:t,current:n,computed:r}=e,o=i.geoToPixel(t.latitude,t.longitude);!function(e,t,i,n,r,o){let s=n*Math.PI/180;e.save(),e.translate(t,i),e.rotate(s),e.globalAlpha=r,e.strokeStyle=o,e.lineWidth=1,e.beginPath(),e.moveTo(-4,-4),e.lineTo(0,0),e.lineTo(-4,4),e.stroke(),e.restore()}(el,o.x,o.y,n.windDirection10m,parseFloat(r.opacity),r.color)}),K()}window.addEventListener("resize",function(){clearTimeout(window.resizeTimer),window.resizeTimer=setTimeout(function(){eb()},200)}),document.addEventListener("DOMContentLoaded",async function(){if(!(ea=document.getElementById("arrow-canvas"))){console.error("Canvas element not found!");return}if(!(el=ea.getContext("2d"))){console.error("Could not get 2D context from canvas!");return}if(!function(){if(!(et=document.getElementById("wind-canvas"))){console.error("Wind canvas element not found!");return}if(!(ei=et.getContext("2d"))){console.error("Could not get 2D context from wind canvas!");return}er(5e4,ee),console.log("Wind layer initialized with",ee.length,"particles")}(),ec()&&function(){let e=localStorage.getItem(eo);if(!e)return!1;try{let{timestamp:t}=JSON.parse(e);if(Date.now()-t>2592e6)return!1;return!0}catch(e){return console.error("Error parsing cached data:",e),!1}}())(function(){if(ea&&el)try{let e=localStorage.getItem(eo);if(!e)return;let{data:t}=JSON.parse(e);es=t,console.log(`Loaded ${es.length} points from cache.`),es.forEach(e=>{let t=e.location.latitude*Math.PI/180,i=e.location.longitude*Math.PI/180;e.x=+Math.cos(t)*Math.cos(i),e.y=+Math.cos(t)*Math.sin(i),e.z=+Math.sin(t)}),(e_=ed())?console.log("Successfully rebuilt KDTree from cached data with 3D coords."):console.warn("Failed to rebuild KDTree from cached data."),eb()}catch(e){console.error("Error processing cached data:",e)}})(),ep();else{let{latitudes:e,longitudes:t}=function(e){let t=new Float32Array(4900),i=new Float32Array(4900),n=Math.PI*(3-Math.sqrt(5));for(let r=0;r<e;r++){let o=180/Math.PI*Math.asin(1-r/(e-1)*2),s=n*r%(2*Math.PI)*(180/Math.PI)-180;t[r]=o,i[r]=s}return console.log(`Generated ${e} points around the globe`),{latitudes:t,longitudes:i}}(4900);es=[],await eh(e,t,10),e_=ed(),ep()}}),window.clearWeatherCache=function(){try{return localStorage.removeItem(eo),es=[],e_=null,el&&ea&&el.clearRect(0,0,ea.width,ea.height),ei&&et&&ei.clearRect(0,0,et.width,et.height),ee=[],console.log("Wind layer cleared."),console.log("Weather data cache cleared successfully"),!0}catch(e){return console.error("Error clearing weather data cache:",e),!1}};let ef=0;function ep(){ef=Date.now(),function e(){let t=Date.now(),i=t-ef;i>=33.333333333333336&&(!function(e){if(!et||!ei){console.warn("Wind canvas or context not initialized, skipping redraw.");return}if(!e_){window.hasLoggedMissingTree||(console.warn("Weather data tree not available, skipping wind particle redraw."),window.hasLoggedMissingTree=!0),ei.clearRect(0,0,et.width,et.height);return}let t=document.querySelector("#world-map");if(!t)return;let i=t.getBoundingClientRect();(et.width!==i.width||et.height!==i.height)&&(et.width=i.width,et.height=i.height),ei.clearRect(0,0,et.width,et.height);let n=J(et.width,et.height),r=15*e,o=Math.floor(.02*ee.length);o>0&&(ee.splice(0,o),er(o,ee)),ee.forEach(e=>{let t=e.location.latitude*en,i=e.location.longitude*en;e.x=+Math.cos(t)*Math.cos(i),e.y=+Math.cos(t)*Math.sin(i),e.z=+Math.sin(t);let o=e_.nearest(e,1);if(!o||0===o.length)return;let[s,a]=o[0];e.current.windSpeed10m+=(s.current.windSpeed10m-e.current.windSpeed10m)*.05;let l=s.current.windDirection10m-e.current.windDirection10m;for(;l<=-180;)l+=360;for(;l>180;)l-=360;e.current.windDirection10m+=.05*l,e.current.windDirection10m=(e.current.windDirection10m+360)%360,e.computed.color=s.computed.color,e.computed.opacity=parseFloat(s.computed.opacity);let _=e.current.windSpeed10m/111e3*r,c=e.current.windDirection10m*en,h=-(_*Math.cos(c)),u=_*Math.sin(c),d=Math.cos(t),b=d>.01?u/d:0,f=e.computed.pixelX,p=e.computed.pixelY;e.location.latitude+=h,e.location.longitude+=b;let m=!1;e.location.latitude>90?(e.location.latitude=180-e.location.latitude,e.location.longitude+=180,m=!0):e.location.latitude<-90&&(e.location.latitude=-180-e.location.latitude,e.location.longitude+=180,m=!0),e.location.longitude>180?(e.location.longitude-=360,m=!0):e.location.longitude<-180&&(e.location.longitude+=360,m=!0);let g=n.geoToPixel(e.location.latitude,e.location.longitude);if(e.computed.pixelX=g.x,e.computed.pixelY=g.y,m?e.computed.tail=[]:(e.computed.tail.push({latitude:e.location.latitude-h,longitude:e.location.longitude-b}),e.computed.tail.length>10&&e.computed.tail.shift()),e.computed.tail.length>1&&!m&&void 0!==f&&void 0!==p){ei.beginPath(),ei.moveTo(f,p),ei.lineTo(e.computed.pixelX,e.computed.pixelY);for(let t=e.computed.tail.length-2;t>=0;t--){let i=n.geoToPixel(e.computed.tail[t].latitude,e.computed.tail[t].longitude);ei.lineTo(i.x,i.y)}ei.strokeStyle=e.computed.color,ei.globalAlpha=.3,ei.lineWidth=1,ei.stroke()}!function(e,t,i,n,r){e.fillStyle=r,e.globalAlpha=n;let o=Math.min(window.innerWidth,window.innerHeight),s=1;o>=768?s=3:o>=480&&(s=2);let a=s/2;e.fillRect(Math.floor(t-a),Math.floor(i-a),s,s)}(ei,e.computed.pixelX,e.computed.pixelY,e.computed.opacity,e.computed.color)})}(i),ef=t),requestAnimationFrame(e)}()}
//# sourceMappingURL=map.aeca6e2b.js.map
