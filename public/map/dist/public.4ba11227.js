var e=globalThis,t={},i={},n=e.parcelRequire49ed;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},e.parcelRequire49ed=n),(0,n.register)("kz4HC",function(e,t){Object.defineProperty(e.exports,"particleSystem",{get:()=>r,set:void 0,enumerable:!0,configurable:!0});var i=n("7YaLV");let r=new class{constructor(){this.particles=[],this.canvas=document.getElementById("particle-canvas"),this.setupCanvas(),this.engine=i.Engine.create({gravity:{x:0,y:0,scale:0}}),this.world=this.engine.world,this.render=i.Render.create({canvas:this.canvas,engine:this.engine,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1,background:"transparent"}}),i.Events.on(this.engine,"collisionStart",this.handleCollision.bind(this)),i.Render.run(this.render),i.Engine.run(this.engine)}setupCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.pointerEvents="none"}addParticle(e,t,n,r,o,a){let s=Math.min(Math.max(Math.abs(a),.5),2),d=i.Bodies.circle(e,t,3*s,{friction:0,frictionAir:.02,restitution:.8,render:{fillStyle:this.getColorFromZScore(o)}}),l=Math.min(Math.max(Math.abs(a),.5),2),h={x:Math.cos(r*Math.PI/180)*n*.001*l,y:Math.sin(r*Math.PI/180)*n*.001*l};i.Body.setVelocity(d,h),this.particles.push({body:d,windSpeed:n,windDirection:r,temperature:o,windSpeedZScore:a}),i.World.add(this.world,d)}handleCollision(e){e.pairs.forEach(e=>{let t=this.particles.find(t=>t.body.id===e.bodyA.id),n=this.particles.find(t=>t.body.id===e.bodyB.id);if(t&&n){let r=Math.min(Math.max(.1*((Math.abs(t.windSpeedZScore)+Math.abs(n.windSpeedZScore))/2),.05),.2);i.Body.setVelocity(e.bodyA,{x:e.bodyA.velocity.x*(1+r),y:e.bodyA.velocity.y*(1+r)}),i.Body.setVelocity(e.bodyB,{x:e.bodyB.velocity.x*(1+r),y:e.bodyB.velocity.y*(1+r)})}})}getColorFromZScore(e){let t=Math.min(Math.max(Math.abs(e),.5),2.5)/2.5,i=.6+.4*t;if(e>=0){let e=Math.round(255*(1-t));return`rgba(255, ${e}, ${e}, ${i})`}{let e=Math.round(255*(1-t));return`rgba(${e}, ${e}, 255, ${i})`}}update(){this.particles.forEach(e=>{let t=e.body.position;(t.x<0||t.x>window.innerWidth||t.y<0||t.y>window.innerHeight)&&(i.World.remove(this.world,e.body),this.particles=this.particles.filter(t=>t.body.id!==e.body.id))});let e=document.querySelector("#world-map");if(!e)return;let t=e.getBoundingClientRect();this.particles.forEach(e=>{let n=e.body.position,r=this.handleTorusWrapping(n.x,n.y,t.width,t.height);i.Body.setPosition(e.body,r)})}clear(){this.particles.forEach(e=>{i.World.remove(this.world,e.body)}),this.particles=[]}handleTorusWrapping(e,t,i,n){let r=e,o=t;return e<0?r=i+e%i:e>i&&(r=e%i),{x:r,y:Math.max(0,Math.min(n,t))}}}}),n("kz4HC");
//# sourceMappingURL=public.4ba11227.js.map
