function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t,i,n,o,r,s,a,l,c,u,d,p=globalThis,f={},h={},m=p.parcelRequire49ed;null==m&&((m=function(e){if(e in f)return f[e].exports;if(e in h){var t=h[e];delete h[e];var i={id:e,exports:{}};return f[e]=i,t.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){h[e]=t},p.parcelRequire49ed=m);var _=m.register;_("dgAuU",function(t,i){e(t.exports,"SIZEOF_SHORT",()=>m("fQbsP").SIZEOF_SHORT),e(t.exports,"SIZEOF_INT",()=>m("fQbsP").SIZEOF_INT),e(t.exports,"FILE_IDENTIFIER_LENGTH",()=>m("fQbsP").FILE_IDENTIFIER_LENGTH),e(t.exports,"SIZE_PREFIX_LENGTH",()=>m("fQbsP").SIZE_PREFIX_LENGTH),e(t.exports,"int32",()=>m("1k22A").int32),e(t.exports,"float32",()=>m("1k22A").float32),e(t.exports,"float64",()=>m("1k22A").float64),e(t.exports,"isLittleEndian",()=>m("1k22A").isLittleEndian),e(t.exports,"Encoding",()=>m("joNij").Encoding),e(t.exports,"Builder",()=>m("82iZG").Builder),e(t.exports,"ByteBuffer",()=>m("fL8AT").ByteBuffer),m("fQbsP"),m("1k22A"),m("joNij"),m("82iZG"),m("fL8AT")}),_("fQbsP",function(t,i){e(t.exports,"SIZEOF_SHORT",()=>n),e(t.exports,"SIZEOF_INT",()=>o),e(t.exports,"FILE_IDENTIFIER_LENGTH",()=>r),e(t.exports,"SIZE_PREFIX_LENGTH",()=>s);let n=2,o=4,r=4,s=4}),_("1k22A",function(t,i){e(t.exports,"int32",()=>n),e(t.exports,"float32",()=>o),e(t.exports,"float64",()=>r),e(t.exports,"isLittleEndian",()=>s);let n=new Int32Array(2),o=new Float32Array(n.buffer),r=new Float64Array(n.buffer),s=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]}),_("joNij",function(t,i){var n,o;e(t.exports,"Encoding",()=>n),(o=n||(n={}))[o.UTF8_BYTES=1]="UTF8_BYTES",o[o.UTF16_STRING=2]="UTF16_STRING"}),_("82iZG",function(t,i){e(t.exports,"Builder",()=>r);var n=m("fL8AT"),o=m("fQbsP");class r{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=n.ByteBuffer.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);let i=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<i+e+t;){let e=this.bb.capacity();this.bb=r.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){let t=e.capacity();if(0xc0000000&t)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let i=t<<1,o=n.ByteBuffer.allocate(i);return o.setPosition(i-t),o.bytes().set(e.bytes(),i-t),o}addOffset(e){this.prep(o.SIZEOF_INT,0),this.writeInt32(this.offset()-e+o.SIZEOF_INT)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let e=this.offset(),t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);let i=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);let n=(i+2)*o.SIZEOF_SHORT;this.addInt16(n);let r=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){let e=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(e)){for(let t=o.SIZEOF_SHORT;t<n;t+=o.SIZEOF_SHORT)if(this.bb.readInt16(s+t)!=this.bb.readInt16(e+t))continue e;r=this.vtables[t];break}}return r?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,r-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){let n=i?o.SIZE_PREFIX_LENGTH:0;if(t){if(this.prep(this.minalign,o.SIZEOF_INT+o.FILE_IDENTIFIER_LENGTH+n),t.length!=o.FILE_IDENTIFIER_LENGTH)throw TypeError("FlatBuffers: file identifier must be length "+o.FILE_IDENTIFIER_LENGTH);for(let e=o.FILE_IDENTIFIER_LENGTH-1;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,o.SIZEOF_INT+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){let i=this.bb.capacity()-e,n=i-this.bb.readInt32(i);if(!(t<this.bb.readInt16(n)&&0!=this.bb.readInt16(n+t)))throw TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(o.SIZEOF_INT,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);let t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){let t;return null==e?0:(t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createByteVector(e){return null==e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){let t=[];for(let i=0;i<e.length;++i){let n=e[i];if(null!==n)t.push(this.createObjectOffset(n));else throw TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}}),_("fL8AT",function(t,i){e(t.exports,"ByteBuffer",()=>s);var n=m("fQbsP"),o=m("1k22A"),r=m("joNij");class s{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new s(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return o.int32[0]=this.readInt32(e),o.float32[0]}readFloat64(e){return o.int32[+!o.isLittleEndian]=this.readInt32(e),o.int32[+!!o.isLittleEndian]=this.readInt32(e+4),o.float64[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){o.float32[0]=t,this.writeInt32(e,o.int32[0])}writeFloat64(e,t){o.float64[0]=t,this.writeInt32(e,o.int32[+!o.isLittleEndian]),this.writeInt32(e+4,o.int32[+!!o.isLittleEndian])}getBufferIdentifier(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+t));return e}__offset(e,t){let i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);let i=this.readInt32(e);e+=n.SIZEOF_INT;let o=this.bytes_.subarray(e,e+i);return t===r.Encoding.UTF8_BYTES?o:this.text_decoder_.decode(o)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+n.SIZEOF_INT}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(let t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+n.SIZEOF_INT+t))return!1;return!0}createScalarList(e,t){let i=[];for(let n=0;n<t;++n){let t=e(n);null!==t&&i.push(t)}return i}createObjList(e,t){let i=[];for(let n=0;n<t;++n){let t=e(n);null!==t&&i.push(t.unpack())}return i}}});var g={},b=g&&g.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0}),g.fetchWeatherApi=function(e,t){return b(this,arguments,void 0,function*(e,t,i=3,n=.2,o=2,r={}){let s=new URLSearchParams(t);s.set("format","flatbuffers");let a=yield function(e){return b(this,arguments,void 0,function*(e,t=3,i=.5,n=2,o={}){let r=[500,502,504],s=0,a=yield fetch(e,o);for(;r.includes(a.status);){if(++s>=t)throw Error(a.statusText);let r=1e3*Math.min(i*Math.pow(2,s),n);yield H(r),a=yield fetch(e,o)}if([400,429].includes(a.status)){let e=yield a.json();if("reason"in e)throw Error(e.reason);throw Error(a.statusText)}return a})}(`${e}?${s.toString()}`,i,n,o,r),l=new v.ByteBuffer(new Uint8Array((yield a.arrayBuffer()))),c=[],u=0;for(;u<l.capacity();){l.setPosition(u);let e=l.readInt32(l.position());c.push(y.WeatherApiResponse.getSizePrefixedRootAsWeatherApiResponse(l)),u+=e+4}return c})},m("dgAuU");var v=m("fL8AT"),y={},x=y&&y.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),w=y&&y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),S=y&&y.__importStar||(t=function(e){return(t=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t})(e)},function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n=t(e),o=0;o<n.length;o++)"default"!==n[o]&&x(i,e,n[o]);return w(i,e),i});Object.defineProperty(y,"__esModule",{value:!0}),y.WeatherApiResponse=void 0;const I=S(m("dgAuU"));var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.Model=void 0,(i=l||(P.Model=l={}))[i.undefined=0]="undefined",i[i.best_match=1]="best_match",i[i.gfs_seamless=2]="gfs_seamless",i[i.gfs_global=3]="gfs_global",i[i.gfs_hrrr=4]="gfs_hrrr",i[i.meteofrance_seamless=5]="meteofrance_seamless",i[i.meteofrance_arpege_seamless=6]="meteofrance_arpege_seamless",i[i.meteofrance_arpege_world=7]="meteofrance_arpege_world",i[i.meteofrance_arpege_europe=8]="meteofrance_arpege_europe",i[i.meteofrance_arome_seamless=9]="meteofrance_arome_seamless",i[i.meteofrance_arome_france=10]="meteofrance_arome_france",i[i.meteofrance_arome_france_hd=11]="meteofrance_arome_france_hd",i[i.jma_seamless=12]="jma_seamless",i[i.jma_msm=13]="jma_msm",i[i.jms_gsm=14]="jms_gsm",i[i.jma_gsm=15]="jma_gsm",i[i.gem_seamless=16]="gem_seamless",i[i.gem_global=17]="gem_global",i[i.gem_regional=18]="gem_regional",i[i.gem_hrdps_continental=19]="gem_hrdps_continental",i[i.icon_seamless=20]="icon_seamless",i[i.icon_global=21]="icon_global",i[i.icon_eu=22]="icon_eu",i[i.icon_d2=23]="icon_d2",i[i.ecmwf_ifs04=24]="ecmwf_ifs04",i[i.metno_nordic=25]="metno_nordic",i[i.era5_seamless=26]="era5_seamless",i[i.era5=27]="era5",i[i.cerra=28]="cerra",i[i.era5_land=29]="era5_land",i[i.ecmwf_ifs=30]="ecmwf_ifs",i[i.gwam=31]="gwam",i[i.ewam=32]="ewam",i[i.glofas_seamless_v3=33]="glofas_seamless_v3",i[i.glofas_forecast_v3=34]="glofas_forecast_v3",i[i.glofas_consolidated_v3=35]="glofas_consolidated_v3",i[i.glofas_seamless_v4=36]="glofas_seamless_v4",i[i.glofas_forecast_v4=37]="glofas_forecast_v4",i[i.glofas_consolidated_v4=38]="glofas_consolidated_v4",i[i.gfs025=39]="gfs025",i[i.gfs05=40]="gfs05",i[i.CMCC_CM2_VHR4=41]="CMCC_CM2_VHR4",i[i.FGOALS_f3_H_highresSST=42]="FGOALS_f3_H_highresSST",i[i.FGOALS_f3_H=43]="FGOALS_f3_H",i[i.HiRAM_SIT_HR=44]="HiRAM_SIT_HR",i[i.MRI_AGCM3_2_S=45]="MRI_AGCM3_2_S",i[i.EC_Earth3P_HR=46]="EC_Earth3P_HR",i[i.MPI_ESM1_2_XR=47]="MPI_ESM1_2_XR",i[i.NICAM16_8S=48]="NICAM16_8S",i[i.cams_europe=49]="cams_europe",i[i.cams_global=50]="cams_global",i[i.cfsv2=51]="cfsv2",i[i.era5_ocean=52]="era5_ocean",i[i.cma_grapes_global=53]="cma_grapes_global",i[i.bom_access_global=54]="bom_access_global",i[i.bom_access_global_ensemble=55]="bom_access_global_ensemble",i[i.arpae_cosmo_seamless=56]="arpae_cosmo_seamless",i[i.arpae_cosmo_2i=57]="arpae_cosmo_2i",i[i.arpae_cosmo_2i_ruc=58]="arpae_cosmo_2i_ruc",i[i.arpae_cosmo_5m=59]="arpae_cosmo_5m",i[i.ecmwf_ifs025=60]="ecmwf_ifs025",i[i.ecmwf_aifs025=61]="ecmwf_aifs025",i[i.gfs013=62]="gfs013",i[i.gfs_graphcast025=63]="gfs_graphcast025",i[i.ecmwf_wam025=64]="ecmwf_wam025",i[i.meteofrance_wave=65]="meteofrance_wave",i[i.meteofrance_currents=66]="meteofrance_currents",i[i.ecmwf_wam025_ensemble=67]="ecmwf_wam025_ensemble",i[i.ncep_gfswave025=68]="ncep_gfswave025",i[i.ncep_gefswave025=69]="ncep_gefswave025",i[i.knmi_seamless=70]="knmi_seamless",i[i.knmi_harmonie_arome_europe=71]="knmi_harmonie_arome_europe",i[i.knmi_harmonie_arome_netherlands=72]="knmi_harmonie_arome_netherlands",i[i.dmi_seamless=73]="dmi_seamless",i[i.dmi_harmonie_arome_europe=74]="dmi_harmonie_arome_europe",i[i.metno_seamless=75]="metno_seamless",i[i.era5_ensemble=76]="era5_ensemble",i[i.ecmwf_ifs_analysis=77]="ecmwf_ifs_analysis",i[i.ecmwf_ifs_long_window=78]="ecmwf_ifs_long_window",i[i.ecmwf_ifs_analysis_long_window=79]="ecmwf_ifs_analysis_long_window",i[i.ukmo_global_deterministic_10km=80]="ukmo_global_deterministic_10km",i[i.ukmo_uk_deterministic_2km=81]="ukmo_uk_deterministic_2km",i[i.ukmo_seamless=82]="ukmo_seamless",i[i.ncep_gfswave016=83]="ncep_gfswave016",i[i.ncep_nbm_conus=84]="ncep_nbm_conus",i[i.ukmo_global_ensemble_20km=85]="ukmo_global_ensemble_20km",i[i.ecmwf_aifs025_single=86]="ecmwf_aifs025_single",i[i.jma_jaxa_himawari=87]="jma_jaxa_himawari",i[i.eumetsat_sarah3=88]="eumetsat_sarah3",i[i.eumetsat_lsa_saf_msg=89]="eumetsat_lsa_saf_msg",i[i.eumetsat_lsa_saf_iodc=90]="eumetsat_lsa_saf_iodc",i[i.satellite_radiation_seamless=91]="satellite_radiation_seamless",i[i.kma_gdps=92]="kma_gdps",i[i.kma_ldps=93]="kma_ldps";var A={},M=A&&A.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),B=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),T=A&&A.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=n(e),o=0;o<i.length;o++)"default"!==i[o]&&M(t,e,i[o]);return B(t,e),t});Object.defineProperty(A,"__esModule",{value:!0}),A.VariablesWithTime=void 0;const k=T(m("dgAuU"));var E={},C=E&&E.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),F=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),R=E&&E.__importStar||(o=function(e){return(o=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=o(e),n=0;n<i.length;n++)"default"!==i[n]&&C(t,e,i[n]);return F(t,e),t});Object.defineProperty(E,"__esModule",{value:!0}),E.VariableWithValues=void 0;const O=R(m("dgAuU"));var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.Aggregation=void 0,(r=c||(D.Aggregation=c={}))[r.none=0]="none",r[r.minimum=1]="minimum",r[r.maximum=2]="maximum",r[r.mean=3]="mean",r[r.p10=4]="p10",r[r.p25=5]="p25",r[r.median=6]="median",r[r.p75=7]="p75",r[r.p90=8]="p90",r[r.dominant=9]="dominant",r[r.sum=10]="sum",r[r.spread=11]="spread";var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.Unit=void 0,(s=u||(L.Unit=u={}))[s.undefined=0]="undefined",s[s.celsius=1]="celsius",s[s.centimetre=2]="centimetre",s[s.cubic_metre_per_cubic_metre=3]="cubic_metre_per_cubic_metre",s[s.cubic_metre_per_second=4]="cubic_metre_per_second",s[s.degree_direction=5]="degree_direction",s[s.dimensionless_integer=6]="dimensionless_integer",s[s.dimensionless=7]="dimensionless",s[s.european_air_quality_index=8]="european_air_quality_index",s[s.fahrenheit=9]="fahrenheit",s[s.feet=10]="feet",s[s.fraction=11]="fraction",s[s.gdd_celsius=12]="gdd_celsius",s[s.geopotential_metre=13]="geopotential_metre",s[s.grains_per_cubic_metre=14]="grains_per_cubic_metre",s[s.gram_per_kilogram=15]="gram_per_kilogram",s[s.hectopascal=16]="hectopascal",s[s.hours=17]="hours",s[s.inch=18]="inch",s[s.iso8601=19]="iso8601",s[s.joule_per_kilogram=20]="joule_per_kilogram",s[s.kelvin=21]="kelvin",s[s.kilopascal=22]="kilopascal",s[s.kilogram_per_square_metre=23]="kilogram_per_square_metre",s[s.kilometres_per_hour=24]="kilometres_per_hour",s[s.knots=25]="knots",s[s.megajoule_per_square_metre=26]="megajoule_per_square_metre",s[s.metre_per_second_not_unit_converted=27]="metre_per_second_not_unit_converted",s[s.metre_per_second=28]="metre_per_second",s[s.metre=29]="metre",s[s.micrograms_per_cubic_metre=30]="micrograms_per_cubic_metre",s[s.miles_per_hour=31]="miles_per_hour",s[s.millimetre=32]="millimetre",s[s.pascal=33]="pascal",s[s.per_second=34]="per_second",s[s.percentage=35]="percentage",s[s.seconds=36]="seconds",s[s.unix_time=37]="unix_time",s[s.us_air_quality_index=38]="us_air_quality_index",s[s.watt_per_square_metre=39]="watt_per_square_metre",s[s.wmo_code=40]="wmo_code",s[s.parts_per_million=41]="parts_per_million";var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.Variable=void 0,(a=d||(j.Variable=d={}))[a.undefined=0]="undefined",a[a.apparent_temperature=1]="apparent_temperature",a[a.cape=2]="cape",a[a.cloud_cover=3]="cloud_cover",a[a.cloud_cover_high=4]="cloud_cover_high",a[a.cloud_cover_low=5]="cloud_cover_low",a[a.cloud_cover_mid=6]="cloud_cover_mid",a[a.daylight_duration=7]="daylight_duration",a[a.dew_point=8]="dew_point",a[a.diffuse_radiation=9]="diffuse_radiation",a[a.diffuse_radiation_instant=10]="diffuse_radiation_instant",a[a.direct_normal_irradiance=11]="direct_normal_irradiance",a[a.direct_normal_irradiance_instant=12]="direct_normal_irradiance_instant",a[a.direct_radiation=13]="direct_radiation",a[a.direct_radiation_instant=14]="direct_radiation_instant",a[a.et0_fao_evapotranspiration=15]="et0_fao_evapotranspiration",a[a.evapotranspiration=16]="evapotranspiration",a[a.freezing_level_height=17]="freezing_level_height",a[a.growing_degree_days=18]="growing_degree_days",a[a.is_day=19]="is_day",a[a.latent_heat_flux=20]="latent_heat_flux",a[a.leaf_wetness_probability=21]="leaf_wetness_probability",a[a.lifted_index=22]="lifted_index",a[a.lightning_potential=23]="lightning_potential",a[a.precipitation=24]="precipitation",a[a.precipitation_hours=25]="precipitation_hours",a[a.precipitation_probability=26]="precipitation_probability",a[a.pressure_msl=27]="pressure_msl",a[a.rain=28]="rain",a[a.relative_humidity=29]="relative_humidity",a[a.runoff=30]="runoff",a[a.sensible_heat_flux=31]="sensible_heat_flux",a[a.shortwave_radiation=32]="shortwave_radiation",a[a.shortwave_radiation_instant=33]="shortwave_radiation_instant",a[a.showers=34]="showers",a[a.snow_depth=35]="snow_depth",a[a.snow_height=36]="snow_height",a[a.snowfall=37]="snowfall",a[a.snowfall_height=38]="snowfall_height",a[a.snowfall_water_equivalent=39]="snowfall_water_equivalent",a[a.sunrise=40]="sunrise",a[a.sunset=41]="sunset",a[a.soil_moisture=42]="soil_moisture",a[a.soil_moisture_index=43]="soil_moisture_index",a[a.soil_temperature=44]="soil_temperature",a[a.surface_pressure=45]="surface_pressure",a[a.surface_temperature=46]="surface_temperature",a[a.temperature=47]="temperature",a[a.terrestrial_radiation=48]="terrestrial_radiation",a[a.terrestrial_radiation_instant=49]="terrestrial_radiation_instant",a[a.total_column_integrated_water_vapour=50]="total_column_integrated_water_vapour",a[a.updraft=51]="updraft",a[a.uv_index=52]="uv_index",a[a.uv_index_clear_sky=53]="uv_index_clear_sky",a[a.vapour_pressure_deficit=54]="vapour_pressure_deficit",a[a.visibility=55]="visibility",a[a.weather_code=56]="weather_code",a[a.wind_direction=57]="wind_direction",a[a.wind_gusts=58]="wind_gusts",a[a.wind_speed=59]="wind_speed",a[a.vertical_velocity=60]="vertical_velocity",a[a.geopotential_height=61]="geopotential_height",a[a.wet_bulb_temperature=62]="wet_bulb_temperature",a[a.river_discharge=63]="river_discharge",a[a.wave_height=64]="wave_height",a[a.wave_period=65]="wave_period",a[a.wave_direction=66]="wave_direction",a[a.wind_wave_height=67]="wind_wave_height",a[a.wind_wave_period=68]="wind_wave_period",a[a.wind_wave_peak_period=69]="wind_wave_peak_period",a[a.wind_wave_direction=70]="wind_wave_direction",a[a.swell_wave_height=71]="swell_wave_height",a[a.swell_wave_period=72]="swell_wave_period",a[a.swell_wave_peak_period=73]="swell_wave_peak_period",a[a.swell_wave_direction=74]="swell_wave_direction",a[a.pm10=75]="pm10",a[a.pm2p5=76]="pm2p5",a[a.dust=77]="dust",a[a.aerosol_optical_depth=78]="aerosol_optical_depth",a[a.carbon_monoxide=79]="carbon_monoxide",a[a.nitrogen_dioxide=80]="nitrogen_dioxide",a[a.ammonia=81]="ammonia",a[a.ozone=82]="ozone",a[a.sulphur_dioxide=83]="sulphur_dioxide",a[a.alder_pollen=84]="alder_pollen",a[a.birch_pollen=85]="birch_pollen",a[a.grass_pollen=86]="grass_pollen",a[a.mugwort_pollen=87]="mugwort_pollen",a[a.olive_pollen=88]="olive_pollen",a[a.ragweed_pollen=89]="ragweed_pollen",a[a.european_aqi=90]="european_aqi",a[a.european_aqi_pm2p5=91]="european_aqi_pm2p5",a[a.european_aqi_pm10=92]="european_aqi_pm10",a[a.european_aqi_nitrogen_dioxide=93]="european_aqi_nitrogen_dioxide",a[a.european_aqi_ozone=94]="european_aqi_ozone",a[a.european_aqi_sulphur_dioxide=95]="european_aqi_sulphur_dioxide",a[a.us_aqi=96]="us_aqi",a[a.us_aqi_pm2p5=97]="us_aqi_pm2p5",a[a.us_aqi_pm10=98]="us_aqi_pm10",a[a.us_aqi_nitrogen_dioxide=99]="us_aqi_nitrogen_dioxide",a[a.us_aqi_ozone=100]="us_aqi_ozone",a[a.us_aqi_sulphur_dioxide=101]="us_aqi_sulphur_dioxide",a[a.us_aqi_carbon_monoxide=102]="us_aqi_carbon_monoxide",a[a.sunshine_duration=103]="sunshine_duration",a[a.convective_inhibition=104]="convective_inhibition",a[a.shortwave_radiation_clear_sky=105]="shortwave_radiation_clear_sky",a[a.global_tilted_irradiance=106]="global_tilted_irradiance",a[a.global_tilted_irradiance_instant=107]="global_tilted_irradiance_instant",a[a.ocean_current_velocity=108]="ocean_current_velocity",a[a.ocean_current_direction=109]="ocean_current_direction",a[a.cloud_base=110]="cloud_base",a[a.cloud_top=111]="cloud_top",a[a.mass_density=112]="mass_density",a[a.boundary_layer_height=113]="boundary_layer_height",a[a.formaldehyde=114]="formaldehyde",a[a.glyoxal=115]="glyoxal",a[a.non_methane_volatile_organic_compounds=116]="non_methane_volatile_organic_compounds",a[a.pm10_wildfires=117]="pm10_wildfires",a[a.peroxyacyl_nitrates=118]="peroxyacyl_nitrates",a[a.secondary_inorganic_aerosol=119]="secondary_inorganic_aerosol",a[a.residential_elementary_carbon=120]="residential_elementary_carbon",a[a.total_elementary_carbon=121]="total_elementary_carbon",a[a.pm2_5_total_organic_matter=122]="pm2_5_total_organic_matter",a[a.sea_salt_aerosol=123]="sea_salt_aerosol",a[a.nitrogen_monoxide=124]="nitrogen_monoxide",a[a.thunderstorm_probability=125]="thunderstorm_probability",a[a.rain_probability=126]="rain_probability",a[a.freezing_rain_probability=127]="freezing_rain_probability",a[a.ice_pellets_probability=128]="ice_pellets_probability",a[a.snowfall_probability=129]="snowfall_probability",a[a.carbon_dioxide=130]="carbon_dioxide",a[a.methane=131]="methane",a[a.sea_level_height_msl=132]="sea_level_height_msl",a[a.sea_surface_temperature=133]="sea_surface_temperature",a[a.invert_barometer_height=134]="invert_barometer_height",a[a.hail=135]="hail",a[a.albedo=136]="albedo",a[a.precipitation_type=137]="precipitation_type",a[a.convective_cloud_base=138]="convective_cloud_base",a[a.convective_cloud_top=139]="convective_cloud_top",a[a.snow_depth_water_equivalent=140]="snow_depth_water_equivalent";class V{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsVariableWithValues(e,t){return(t||new V).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsVariableWithValues(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new V).__init(e.readInt32(e.position())+e.position(),e)}variable(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):j.Variable.undefined}unit(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):L.Unit.undefined}value(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0}values(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+4*e):0}valuesLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}valuesArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}valuesInt64(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}valuesInt64Length(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}altitude(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt16(this.bb_pos+e):0}aggregation(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):D.Aggregation.none}pressureLevel(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt16(this.bb_pos+e):0}depth(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readInt16(this.bb_pos+e):0}depthTo(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt16(this.bb_pos+e):0}ensembleMember(){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.readInt16(this.bb_pos+e):0}previousDay(){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt16(this.bb_pos+e):0}}E.VariableWithValues=V;class N{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsVariablesWithTime(e,t){return(t||new N).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsVariablesWithTime(e,t){return e.setPosition(e.position()+k.SIZE_PREFIX_LENGTH),(t||new N).__init(e.readInt32(e.position())+e.position(),e)}time(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}timeEnd(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}interval(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0}variables(e,t){let i=this.bb.__offset(this.bb_pos,10);return i?(t||new E.VariableWithValues).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}variablesLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}}A.VariablesWithTime=N;class q{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsWeatherApiResponse(e,t){return(t||new q).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsWeatherApiResponse(e,t){return e.setPosition(e.position()+I.SIZE_PREFIX_LENGTH),(t||new q).__init(e.readInt32(e.position())+e.position(),e)}latitude(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0}longitude(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0}elevation(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0}generationTimeMilliseconds(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0}locationId(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}model(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint8(this.bb_pos+e):P.Model.undefined}utcOffsetSeconds(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0}timezone(e){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null}timezoneAbbreviation(e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null}current(e){let t=this.bb.__offset(this.bb_pos,22);return t?(e||new A.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}daily(e){let t=this.bb.__offset(this.bb_pos,24);return t?(e||new A.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}hourly(e){let t=this.bb.__offset(this.bb_pos,26);return t?(e||new A.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}minutely15(e){let t=this.bb.__offset(this.bb_pos,28);return t?(e||new A.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}sixHourly(e){let t=this.bb.__offset(this.bb_pos,30);return t?(e||new A.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}}y.WeatherApiResponse=q;const H=e=>new Promise(t=>setTimeout(t,e));var U=function(e){let t=new Float32Array(e),i=new Float32Array(e),n=Math.PI*(3-Math.sqrt(5));for(let o=0;o<e;o++){let r=180/Math.PI*Math.asin(1-o/(e-1)*2),s=n*o%(2*Math.PI)*(180/Math.PI)-180;t[o]=r,i[o]=s}return console.log(`Generated ${e} points around the globe`),{latitudes:t,longitudes:i}};function W(e,t){let i=d3.geoRobinson().scale(e/(2*Math.PI)).translate([e/2,t/2]);return{pixelToGeo:function(e,t){let[n,o]=i.invert([e,t]);return{latitude:o,longitude:n}},geoToPixel:function(e,t){let[n,o]=i([t,e]);return{x:n,y:o}}}}document.addEventListener("click",e=>{let t=document.querySelector("#world-map");if(!t)return;let i=t.getBoundingClientRect(),n=e.clientX,o=e.clientY,r=W(i.width,i.height).pixelToGeo(n,o);console.log(`click -> (${r.latitude}, ${r.longitude})`)});var G={};G=function(){var e=[function(e,t){var i,n={};e.exports=n,n._baseDelta=1e3/60,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(e,t){var i,o;"boolean"==typeof t?(i=2,o=t):(i=1,o=!0);for(var r=i;r<arguments.length;r++){var s=arguments[r];if(s)for(var a in s)o&&s[a]&&s[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=s[a]:(e[a]=e[a]||{},n.extend(e[a],o,s[a])):e[a]=s[a]}return e},n.clone=function(e,t){return n.extend({},t,e)},n.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t},n.values=function(e){var t=[];if(Object.keys){for(var i=Object.keys(e),n=0;n<i.length;n++)t.push(e[i[n]]);return t}for(var o in e)t.push(e[o]);return t},n.get=function(e,t,i,n){t=t.split(".").slice(i,n);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},n.set=function(e,t,i,o,r){var s=t.split(".").slice(o,r);return n.get(e,t,0,-1)[s[s.length-1]]=i,i},n.shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(n.random()*(t+1)),o=e[t];e[t]=e[i],e[i]=o}return e},n.choose=function(e){return e[Math.floor(n.random()*e.length)]},n.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isFunction=function(e){return"function"==typeof e},n.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},n.isString=function(e){return"[object String]"===toString.call(e)},n.clamp=function(e,t,i){return e<t?t:e>i?i:e},n.sign=function(e){return e<0?-1:1},n.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();else if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+i()*(t-e)},i=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280},n.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[e]||(n.warn(e),n._warnedOnce[e]=!0)},n.deprecated=function(e,t,i){e[t]=n.chain(function(){n.warnOnce("\uD83D\uDD05 deprecated \uD83D\uDD05",i)},e[t])},n.nextId=function(){return n._nextId++},n.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return -1},n.map=function(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n+=1)i.push(t(e[n]));return i},n.topologicalSort=function(e){var t=[],i=[],o=[];for(var r in e)i[r]||o[r]||n._topologicalSort(r,i,o,e,t);return t},n._topologicalSort=function(e,t,i,o,r){var s=o[e]||[];i[e]=!0;for(var a=0;a<s.length;a+=1){var l=s[a];!i[l]&&(t[l]||n._topologicalSort(l,t,i,o,r))}i[e]=!1,t[e]=!0,r.push(e)},n.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var i=arguments[t];i._chained?e.push.apply(e,i._chained):e.push(i)}var n=function(){for(var t,i=Array(arguments.length),n=0,o=arguments.length;n<o;n++)i[n]=arguments[n];for(n=0;n<e.length;n+=1){var r=e[n].apply(t,i);void 0!==r&&(t=r)}return t};return n._chained=e,n},n.chainPathBefore=function(e,t,i){return n.set(e,t,n.chain(i,n.get(e,t)))},n.chainPathAfter=function(e,t,i){return n.set(e,t,n.chain(n.get(e,t),i))},n.setDecomp=function(e){n._decomp=e},n.getDecomp=function(){var e=n._decomp;try{e||"undefined"==typeof window||(e=window.decomp),e||void 0===p||(e=p.decomp)}catch(t){e=null}return e}},function(e,t){var i={};e.exports=i,i.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&i.update(t,e),t},i.update=function(e,t,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<t.length;n++){var o=t[n];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},i.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},i.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},i.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},i.shift=function(e,t){var i=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+i,e.min.y=t.y,e.max.y=t.y+n}},function(e,t){var i={};e.exports=i,i.create=function(e,t){return{x:e||0,y:t||0}},i.clone=function(e){return{x:e.x,y:e.y}},i.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},i.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},i.rotate=function(e,t,i){var n=Math.cos(t),o=Math.sin(t);i||(i={});var r=e.x*n-e.y*o;return i.y=e.x*o+e.y*n,i.x=r,i},i.rotateAbout=function(e,t,i,n){var o=Math.cos(t),r=Math.sin(t);n||(n={});var s=i.x+((e.x-i.x)*o-(e.y-i.y)*r);return n.y=i.y+((e.x-i.x)*r+(e.y-i.y)*o),n.x=s,n},i.normalise=function(e){var t=i.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},i.dot=function(e,t){return e.x*t.x+e.y*t.y},i.cross=function(e,t){return e.x*t.y-e.y*t.x},i.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)},i.add=function(e,t,i){return i||(i={}),i.x=e.x+t.x,i.y=e.y+t.y,i},i.sub=function(e,t,i){return i||(i={}),i.x=e.x-t.x,i.y=e.y-t.y,i},i.mult=function(e,t){return{x:e.x*t,y:e.y*t}},i.div=function(e,t){return{x:e.x/t,y:e.y/t}},i.perp=function(e,t){return{x:-((t=!0===t?-1:1)*e.y),y:t*e.x}},i.neg=function(e){return{x:-e.x,y:-e.y}},i.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},function(e,t,i){var n={};e.exports=n;var o=i(2),r=i(0);n.create=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=e[n],r={x:o.x,y:o.y,index:n,body:t,isInternal:!1};i.push(r)}return i},n.fromPath=function(e,t){var i=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,function(e,t,n){i.push({x:parseFloat(t),y:parseFloat(n)})}),n.create(i,t)},n.centre=function(e){for(var t,i,r,s=n.area(e,!0),a={x:0,y:0},l=0;l<e.length;l++)r=(l+1)%e.length,t=o.cross(e[l],e[r]),i=o.mult(o.add(e[l],e[r]),t),a=o.add(a,i);return o.div(a,6*s)},n.mean=function(e){for(var t={x:0,y:0},i=0;i<e.length;i++)t.x+=e[i].x,t.y+=e[i].y;return o.div(t,e.length)},n.area=function(e,t){for(var i=0,n=e.length-1,o=0;o<e.length;o++)i+=(e[n].x-e[o].x)*(e[n].y+e[o].y),n=o;return t?i/2:Math.abs(i)/2},n.inertia=function(e,t){for(var i,n,r=0,s=0,a=0;a<e.length;a++)n=(a+1)%e.length,r+=(i=Math.abs(o.cross(e[n],e[a])))*(o.dot(e[n],e[n])+o.dot(e[n],e[a])+o.dot(e[a],e[a])),s+=i;return t/6*(r/s)},n.translate=function(e,t,i){i=void 0!==i?i:1;var n,o=e.length,r=t.x*i,s=t.y*i;for(n=0;n<o;n++)e[n].x+=r,e[n].y+=s;return e},n.rotate=function(e,t,i){if(0!==t){var n,o,r,s,a=Math.cos(t),l=Math.sin(t),c=i.x,u=i.y,d=e.length;for(s=0;s<d;s++)o=(n=e[s]).x-c,r=n.y-u,n.x=c+(o*a-r*l),n.y=u+(o*l+r*a);return e}},n.contains=function(e,t){for(var i,n=t.x,o=t.y,r=e.length,s=e[r-1],a=0;a<r;a++){if(i=e[a],(n-s.x)*(i.y-s.y)+(o-s.y)*(s.x-i.x)>0)return!1;s=i}return!0},n.scale=function(e,t,i,r){if(1===t&&1===i)return e;r=r||n.centre(e);for(var s,a,l=0;l<e.length;l++)s=e[l],a=o.sub(s,r),e[l].x=r.x+a.x*t,e[l].y=r.y+a.y*i;return e},n.chamfer=function(e,t,i,n,s){t="number"==typeof t?[t]:t||[8],i=void 0!==i?i:-1,n=n||2,s=s||14;for(var a=[],l=0;l<e.length;l++){var c=e[l-1>=0?l-1:e.length-1],u=e[l],d=e[(l+1)%e.length],p=t[l<t.length?l:t.length-1];if(0===p){a.push(u);continue}var f=o.normalise({x:u.y-c.y,y:c.x-u.x}),h=o.normalise({x:d.y-u.y,y:u.x-d.x}),m=Math.sqrt(2*Math.pow(p,2)),_=o.mult(r.clone(f),p),g=o.normalise(o.mult(o.add(f,h),.5)),b=o.sub(u,o.mult(g,m)),v=i;-1===i&&(v=1.75*Math.pow(p,.32)),(v=r.clamp(v,n,s))%2==1&&(v+=1);for(var y=Math.acos(o.dot(f,h))/v,x=0;x<v;x++)a.push(o.add(o.rotate(_,y*x),b))}return a},n.clockwiseSort=function(e){var t=n.mean(e);return e.sort(function(e,i){return o.angle(t,e)-o.angle(t,i)}),e},n.isConvex=function(e){var t,i,n,o,r=0,s=e.length;if(s<3)return null;for(t=0;t<s;t++)if(i=(t+1)%s,n=(t+2)%s,(o=(e[i].x-e[t].x)*(e[n].y-e[i].y)-(e[i].y-e[t].y)*(e[n].x-e[i].x))<0?r|=1:o>0&&(r|=2),3===r)return!1;return 0!==r||null},n.hull=function(e){var t,i,n=[],r=[];for((e=e.slice(0)).sort(function(e,t){var i=e.x-t.x;return 0!==i?i:e.y-t.y}),i=0;i<e.length;i+=1){for(t=e[i];r.length>=2&&0>=o.cross3(r[r.length-2],r[r.length-1],t);)r.pop();r.push(t)}for(i=e.length-1;i>=0;i-=1){for(t=e[i];n.length>=2&&0>=o.cross3(n[n.length-2],n[n.length-1],t);)n.pop();n.push(t)}return n.pop(),r.pop(),n.concat(r)}},function(e,t,i){var n,o={};e.exports=o;var r=i(3),s=i(2),a=i(7),l=i(0),c=i(1),u=i(11);o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=1e3/60,o.create=function(e){var t={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:0xffffffff,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:1e3/60,_original:null},i=l.extend(t,e);return n(i,e),i},o.nextGroup=function(e){return e?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory},n=function(e,t){t=t||{},o.set(e,{bounds:e.bounds||c.create(e.vertices),positionPrev:e.positionPrev||s.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),r.rotate(e.vertices,e.angle,e.position),u.rotate(e.axes,e.angle),c.update(e.bounds,e.vertices,e.velocity),o.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var i=e.isStatic?"#14151f":l.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),n=e.isStatic?"#555":"#ccc",a=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||i,e.render.strokeStyle=e.render.strokeStyle||n,e.render.lineWidth=e.render.lineWidth||a,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)},o.set=function(e,t,i){var n;for(n in"string"==typeof t&&(n=t,(t={})[n]=i),t)if(Object.prototype.hasOwnProperty.call(t,n))switch(i=t[n],n){case"isStatic":o.setStatic(e,i);break;case"isSleeping":a.set(e,i);break;case"mass":o.setMass(e,i);break;case"density":o.setDensity(e,i);break;case"inertia":o.setInertia(e,i);break;case"vertices":o.setVertices(e,i);break;case"position":o.setPosition(e,i);break;case"angle":o.setAngle(e,i);break;case"velocity":o.setVelocity(e,i);break;case"angularVelocity":o.setAngularVelocity(e,i);break;case"speed":o.setSpeed(e,i);break;case"angularSpeed":o.setAngularSpeed(e,i);break;case"parts":o.setParts(e,i);break;case"centre":o.setCentre(e,i);break;default:e[n]=i}},o.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var n=e.parts[i];t?(n.isStatic||(n._original={restitution:n.restitution,friction:n.friction,mass:n.mass,inertia:n.inertia,density:n.density,inverseMass:n.inverseMass,inverseInertia:n.inverseInertia}),n.restitution=0,n.friction=1,n.mass=n.inertia=n.density=1/0,n.inverseMass=n.inverseInertia=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.angularVelocity=0,n.speed=0,n.angularSpeed=0,n.motion=0):n._original&&(n.restitution=n._original.restitution,n.friction=n._original.friction,n.mass=n._original.mass,n.inertia=n._original.inertia,n.density=n._original.density,n.inverseMass=n._original.inverseMass,n.inverseInertia=n._original.inverseInertia,n._original=null),n.isStatic=t}},o.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=t/6*i,e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},o.setDensity=function(e,t){o.setMass(e,t*e.area),e.density=t},o.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},o.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=r.create(t,e),e.axes=u.fromVertices(e.vertices),e.area=r.area(e.vertices),o.setMass(e,e.density*e.area);var i=r.centre(e.vertices);r.translate(e.vertices,i,-1),o.setInertia(e,o._inertiaScale*r.inertia(e.vertices,e.mass)),r.translate(e.vertices,e.position),c.update(e.bounds,e.vertices,e.velocity)},o.setParts=function(e,t,i){for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,n=0;n<t.length;n++){var n,s=t[n];s!==e&&(s.parent=e,e.parts.push(s))}if(1!==e.parts.length){if(i=void 0===i||i){var a=[];for(n=0;n<t.length;n++)a=a.concat(t[n].vertices);r.clockwiseSort(a);var l=r.hull(a),c=r.centre(l);o.setVertices(e,l),r.translate(e.vertices,c)}var u=o._totalProperties(e);e.area=u.area,e.parent=e,e.position.x=u.centre.x,e.position.y=u.centre.y,e.positionPrev.x=u.centre.x,e.positionPrev.y=u.centre.y,o.setMass(e,u.mass),o.setInertia(e,u.inertia),o.setPosition(e,u.centre)}},o.setCentre=function(e,t,i){i?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},o.setPosition=function(e,t,i){var n=s.sub(t,e.position);i?(e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.velocity.x=n.x,e.velocity.y=n.y,e.speed=s.magnitude(n)):(e.positionPrev.x+=n.x,e.positionPrev.y+=n.y);for(var o=0;o<e.parts.length;o++){var a=e.parts[o];a.position.x+=n.x,a.position.y+=n.y,r.translate(a.vertices,n),c.update(a.bounds,a.vertices,e.velocity)}},o.setAngle=function(e,t,i){var n=t-e.angle;i?(e.anglePrev=e.angle,e.angularVelocity=n,e.angularSpeed=Math.abs(n)):e.anglePrev+=n;for(var o=0;o<e.parts.length;o++){var a=e.parts[o];a.angle+=n,r.rotate(a.vertices,n,e.position),u.rotate(a.axes,n),c.update(a.bounds,a.vertices,e.velocity),o>0&&s.rotateAbout(a.position,n,e.position,a.position)}},o.setVelocity=function(e,t){var i=e.deltaTime/o._baseDelta;e.positionPrev.x=e.position.x-t.x*i,e.positionPrev.y=e.position.y-t.y*i,e.velocity.x=(e.position.x-e.positionPrev.x)/i,e.velocity.y=(e.position.y-e.positionPrev.y)/i,e.speed=s.magnitude(e.velocity)},o.getVelocity=function(e){var t=o._baseDelta/e.deltaTime;return{x:(e.position.x-e.positionPrev.x)*t,y:(e.position.y-e.positionPrev.y)*t}},o.getSpeed=function(e){return s.magnitude(o.getVelocity(e))},o.setSpeed=function(e,t){o.setVelocity(e,s.mult(s.normalise(o.getVelocity(e)),t))},o.setAngularVelocity=function(e,t){var i=e.deltaTime/o._baseDelta;e.anglePrev=e.angle-t*i,e.angularVelocity=(e.angle-e.anglePrev)/i,e.angularSpeed=Math.abs(e.angularVelocity)},o.getAngularVelocity=function(e){return(e.angle-e.anglePrev)*o._baseDelta/e.deltaTime},o.getAngularSpeed=function(e){return Math.abs(o.getAngularVelocity(e))},o.setAngularSpeed=function(e,t){o.setAngularVelocity(e,l.sign(o.getAngularVelocity(e))*t)},o.translate=function(e,t,i){o.setPosition(e,s.add(e.position,t),i)},o.rotate=function(e,t,i,n){if(i){var r=Math.cos(t),s=Math.sin(t),a=e.position.x-i.x,l=e.position.y-i.y;o.setPosition(e,{x:i.x+(a*r-l*s),y:i.y+(a*s+l*r)},n),o.setAngle(e,e.angle+t,n)}else o.setAngle(e,e.angle+t,n)},o.scale=function(e,t,i,n){var s=0,a=0;n=n||e.position;for(var l=0;l<e.parts.length;l++){var d=e.parts[l];r.scale(d.vertices,t,i,n),d.axes=u.fromVertices(d.vertices),d.area=r.area(d.vertices),o.setMass(d,e.density*d.area),r.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),o.setInertia(d,o._inertiaScale*r.inertia(d.vertices,d.mass)),r.translate(d.vertices,{x:d.position.x,y:d.position.y}),l>0&&(s+=d.area,a+=d.inertia),d.position.x=n.x+(d.position.x-n.x)*t,d.position.y=n.y+(d.position.y-n.y)*i,c.update(d.bounds,d.vertices,e.velocity)}e.parts.length>1&&(e.area=s,e.isStatic||(o.setMass(e,e.density*s),o.setInertia(e,a))),e.circleRadius&&(t===i?e.circleRadius*=t:e.circleRadius=null)},o.update=function(e,t){var i=(t=(void 0!==t?t:1e3/60)*e.timeScale)*t,n=o._timeCorrection?t/(e.deltaTime||t):1,a=1-e.frictionAir*(t/l._baseDelta),d=(e.position.x-e.positionPrev.x)*n,p=(e.position.y-e.positionPrev.y)*n;e.velocity.x=d*a+e.force.x/e.mass*i,e.velocity.y=p*a+e.force.y/e.mass*i,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.deltaTime=t,e.angularVelocity=(e.angle-e.anglePrev)*a*n+e.torque/e.inertia*i,e.anglePrev=e.angle,e.angle+=e.angularVelocity;for(var f=0;f<e.parts.length;f++){var h=e.parts[f];r.translate(h.vertices,e.velocity),f>0&&(h.position.x+=e.velocity.x,h.position.y+=e.velocity.y),0!==e.angularVelocity&&(r.rotate(h.vertices,e.angularVelocity,e.position),u.rotate(h.axes,e.angularVelocity),f>0&&s.rotateAbout(h.position,e.angularVelocity,e.position,h.position)),c.update(h.bounds,h.vertices,e.velocity)}},o.updateVelocities=function(e){var t=o._baseDelta/e.deltaTime,i=e.velocity;i.x=(e.position.x-e.positionPrev.x)*t,i.y=(e.position.y-e.positionPrev.y)*t,e.speed=Math.sqrt(i.x*i.x+i.y*i.y),e.angularVelocity=(e.angle-e.anglePrev)*t,e.angularSpeed=Math.abs(e.angularVelocity)},o.applyForce=function(e,t,i){var n={x:t.x-e.position.x,y:t.y-e.position.y};e.force.x+=i.x,e.force.y+=i.y,e.torque+=n.x*i.y-n.y*i.x},o._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=+(1!==e.parts.length);i<e.parts.length;i++){var n=e.parts[i],o=n.mass!==1/0?n.mass:1;t.mass+=o,t.area+=n.area,t.inertia+=n.inertia,t.centre=s.add(t.centre,s.mult(n.position,o))}return t.centre=s.div(t.centre,t.mass),t}},function(e,t,i){var n={};e.exports=n;var o=i(0);n.on=function(e,t,i){for(var n,o=t.split(" "),r=0;r<o.length;r++)n=o[r],e.events=e.events||{},e.events[n]=e.events[n]||[],e.events[n].push(i);return i},n.off=function(e,t,i){if(!t){e.events={};return}"function"==typeof t&&(i=t,t=o.keys(e.events).join(" "));for(var n=t.split(" "),r=0;r<n.length;r++){var s=e.events[n[r]],a=[];if(i&&s)for(var l=0;l<s.length;l++)s[l]!==i&&a.push(s[l]);e.events[n[r]]=a}},n.trigger=function(e,t,i){var n,r,s,a,l=e.events;if(l&&o.keys(l).length>0){i||(i={}),n=t.split(" ");for(var c=0;c<n.length;c++)if(s=l[r=n[c]]){(a=o.clone(i,!1)).name=r,a.source=e;for(var u=0;u<s.length;u++)s[u].apply(e,[a])}}}},function(e,t,i){var n={};e.exports=n;var o=i(5),r=i(0),s=i(1),a=i(4);n.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},n.setModified=function(e,t,i,o){if(e.isModified=t,t&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),i&&e.parent&&n.setModified(e.parent,t,i,o),o)for(var r=0;r<e.composites.length;r++){var s=e.composites[r];n.setModified(s,t,i,o)}},n.add=function(e,t){var i=[].concat(t);o.trigger(e,"beforeAdd",{object:t});for(var s=0;s<i.length;s++){var a=i[s];switch(a.type){case"body":if(a.parent!==a){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(e,a);break;case"constraint":n.addConstraint(e,a);break;case"composite":n.addComposite(e,a);break;case"mouseConstraint":n.addConstraint(e,a.constraint)}}return o.trigger(e,"afterAdd",{object:t}),e},n.remove=function(e,t,i){var r=[].concat(t);o.trigger(e,"beforeRemove",{object:t});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":n.removeBody(e,a,i);break;case"constraint":n.removeConstraint(e,a,i);break;case"composite":n.removeComposite(e,a,i);break;case"mouseConstraint":n.removeConstraint(e,a.constraint)}}return o.trigger(e,"afterRemove",{object:t}),e},n.addComposite=function(e,t){return e.composites.push(t),t.parent=e,n.setModified(e,!0,!0,!1),e},n.removeComposite=function(e,t,i){var o=r.indexOf(e.composites,t);if(-1!==o){var s=n.allBodies(t);n.removeCompositeAt(e,o);for(var a=0;a<s.length;a++)s[a].sleepCounter=0}if(i)for(var a=0;a<e.composites.length;a++)n.removeComposite(e.composites[a],t,!0);return e},n.removeCompositeAt=function(e,t){return e.composites.splice(t,1),n.setModified(e,!0,!0,!1),e},n.addBody=function(e,t){return e.bodies.push(t),n.setModified(e,!0,!0,!1),e},n.removeBody=function(e,t,i){var o=r.indexOf(e.bodies,t);if(-1!==o&&(n.removeBodyAt(e,o),t.sleepCounter=0),i)for(var s=0;s<e.composites.length;s++)n.removeBody(e.composites[s],t,!0);return e},n.removeBodyAt=function(e,t){return e.bodies.splice(t,1),n.setModified(e,!0,!0,!1),e},n.addConstraint=function(e,t){return e.constraints.push(t),n.setModified(e,!0,!0,!1),e},n.removeConstraint=function(e,t,i){var o=r.indexOf(e.constraints,t);if(-1!==o&&n.removeConstraintAt(e,o),i)for(var s=0;s<e.composites.length;s++)n.removeConstraint(e.composites[s],t,!0);return e},n.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),n.setModified(e,!0,!0,!1),e},n.clear=function(e,t,i){if(i)for(var o=0;o<e.composites.length;o++)n.clear(e.composites[o],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,n.setModified(e,!0,!0,!1),e},n.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var t=[].concat(e.bodies),i=0;i<e.composites.length;i++)t=t.concat(n.allBodies(e.composites[i]));return e.cache&&(e.cache.allBodies=t),t},n.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var t=[].concat(e.constraints),i=0;i<e.composites.length;i++)t=t.concat(n.allConstraints(e.composites[i]));return e.cache&&(e.cache.allConstraints=t),t},n.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var t=[].concat(e.composites),i=0;i<e.composites.length;i++)t=t.concat(n.allComposites(e.composites[i]));return e.cache&&(e.cache.allComposites=t),t},n.get=function(e,t,i){var o,r;switch(i){case"body":o=n.allBodies(e);break;case"constraint":o=n.allConstraints(e);break;case"composite":o=n.allComposites(e).concat(e)}return o?0===(r=o.filter(function(e){return e.id.toString()===t.toString()})).length?null:r[0]:null},n.move=function(e,t,i){return n.remove(e,t),n.add(i,t),e},n.rebase=function(e){for(var t=n.allBodies(e).concat(n.allConstraints(e)).concat(n.allComposites(e)),i=0;i<t.length;i++)t[i].id=r.nextId();return e},n.translate=function(e,t,i){for(var o=i?n.allBodies(e):e.bodies,r=0;r<o.length;r++)a.translate(o[r],t);return e},n.rotate=function(e,t,i,o){for(var r=Math.cos(t),s=Math.sin(t),l=o?n.allBodies(e):e.bodies,c=0;c<l.length;c++){var u=l[c],d=u.position.x-i.x,p=u.position.y-i.y;a.setPosition(u,{x:i.x+(d*r-p*s),y:i.y+(d*s+p*r)}),a.rotate(u,t)}return e},n.scale=function(e,t,i,o,r){for(var s=r?n.allBodies(e):e.bodies,l=0;l<s.length;l++){var c=s[l],u=c.position.x-o.x,d=c.position.y-o.y;a.setPosition(c,{x:o.x+u*t,y:o.y+d*i}),a.scale(c,t,i)}return e},n.bounds=function(e){for(var t=n.allBodies(e),i=[],o=0;o<t.length;o+=1){var r=t[o];i.push(r.bounds.min,r.bounds.max)}return s.create(i)}},function(e,t,i){var n={};e.exports=n;var o=i(4),r=i(5),s=i(0);n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(e,t){for(var i=t/s._baseDelta,r=n._motionSleepThreshold,a=0;a<e.length;a++){var l=e[a],c=o.getSpeed(l),u=o.getAngularSpeed(l),d=c*c+u*u;if(0!==l.force.x||0!==l.force.y){n.set(l,!1);continue}var p=Math.min(l.motion,d),f=Math.max(l.motion,d);l.motion=n._minBias*p+(1-n._minBias)*f,l.sleepThreshold>0&&l.motion<r?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/i&&n.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},n.afterCollisions=function(e){for(var t=n._motionSleepThreshold,i=0;i<e.length;i++){var o=e[i];if(o.isActive){var r=o.collision,s=r.bodyA.parent,a=r.bodyB.parent;if((!s.isSleeping||!a.isSleeping)&&!s.isStatic&&!a.isStatic&&(s.isSleeping||a.isSleeping)){var l=s.isSleeping&&!s.isStatic?s:a,c=l===s?a:s;!l.isStatic&&c.motion>t&&n.set(l,!1)}}}},n.set=function(e,t){var i=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,i||r.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,i&&r.trigger(e,"sleepEnd"))}},function(e,t,i){var n,o,r,s={};e.exports=s;var a=i(3),l=i(9);n=[],o={overlap:0,axis:null},r={overlap:0,axis:null},s.create=function(e,t){return{pair:null,collided:!1,bodyA:e,bodyB:t,parentA:e.parent,parentB:t.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},s.collides=function(e,t,i){if(s._overlapAxes(o,e.vertices,t.vertices,e.axes),o.overlap<=0||(s._overlapAxes(r,t.vertices,e.vertices,t.axes),r.overlap<=0))return null;var n,c,u=i&&i.table[l.id(e,t)];u?c=u.collision:((c=s.create(e,t)).collided=!0,c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent),e=c.bodyA,t=c.bodyB,n=o.overlap<r.overlap?o:r;var d=c.normal,p=c.tangent,f=c.penetration,h=c.supports,m=n.overlap,_=n.axis,g=_.x,b=_.y;g*(t.position.x-e.position.x)+b*(t.position.y-e.position.y)>=0&&(g=-g,b=-b),d.x=g,d.y=b,p.x=-b,p.y=g,f.x=g*m,f.y=b*m,c.depth=m;var v=s._findSupports(e,t,d,1),y=0;if(a.contains(e.vertices,v[0])&&(h[y++]=v[0]),a.contains(e.vertices,v[1])&&(h[y++]=v[1]),y<2){var x=s._findSupports(t,e,d,-1);a.contains(t.vertices,x[0])&&(h[y++]=x[0]),y<2&&a.contains(t.vertices,x[1])&&(h[y++]=x[1])}return 0===y&&(h[y++]=v[0]),c.supportCount=y,c},s._overlapAxes=function(e,t,i,n){var o,r,s,a,l,c,u=t.length,d=i.length,p=t[0].x,f=t[0].y,h=i[0].x,m=i[0].y,_=n.length,g=Number.MAX_VALUE,b=0;for(l=0;l<_;l++){var v=n[l],y=v.x,x=v.y,w=p*y+f*x,S=h*y+m*x,I=w,P=S;for(c=1;c<u;c+=1)(a=t[c].x*y+t[c].y*x)>I?I=a:a<w&&(w=a);for(c=1;c<d;c+=1)(a=i[c].x*y+i[c].y*x)>P?P=a:a<S&&(S=a);if((o=(r=I-S)<(s=P-w)?r:s)<g&&(g=o,b=l,o<=0))break}e.axis=n[b],e.overlap=g},s._findSupports=function(e,t,i,o){var r,s,a,l=t.vertices,c=l.length,u=e.position.x,d=e.position.y,p=i.x*o,f=i.y*o,h=l[0],m=h,_=p*(u-m.x)+f*(d-m.y);for(a=1;a<c;a+=1)(s=p*(u-(m=l[a]).x)+f*(d-m.y))<_&&(_=s,h=m);return(_=p*(u-(r=l[(c+h.index-1)%c]).x)+f*(d-r.y),p*(u-(m=l[(h.index+1)%c]).x)+f*(d-m.y)<_)?(n[0]=h,n[1]=m):(n[0]=h,n[1]=r),n}},function(e,t,i){var n={};e.exports=n;var o=i(16);n.create=function(e,t){var i=e.bodyA,r=e.bodyB,s={id:n.id(i,r),bodyA:i,bodyB:r,collision:e,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:i.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(s,e,t),s},n.update=function(e,t,i){var n=t.supports,o=t.supportCount,r=e.contacts,s=t.parentA,a=t.parentB;e.isActive=!0,e.timeUpdated=i,e.collision=t,e.separation=t.depth,e.inverseMass=s.inverseMass+a.inverseMass,e.friction=s.friction<a.friction?s.friction:a.friction,e.frictionStatic=s.frictionStatic>a.frictionStatic?s.frictionStatic:a.frictionStatic,e.restitution=s.restitution>a.restitution?s.restitution:a.restitution,e.slop=s.slop>a.slop?s.slop:a.slop,e.contactCount=o,t.pair=e;var l=n[0],c=r[0],u=n[1],d=r[1];(d.vertex===l||c.vertex===u)&&(r[1]=c,r[0]=c=d,d=r[1]),c.vertex=l,d.vertex=u},n.setActive=function(e,t,i){t?(e.isActive=!0,e.timeUpdated=i):(e.isActive=!1,e.contactCount=0)},n.id=function(e,t){return e.id<t.id?e.id.toString(36)+":"+t.id.toString(36):t.id.toString(36)+":"+e.id.toString(36)}},function(e,t,i){var n={};e.exports=n;var o=i(3),r=i(2),s=i(7),a=i(1),l=i(11),c=i(0);n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(e){e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var t=e.bodyA?r.add(e.bodyA.position,e.pointA):e.pointA,i=e.bodyB?r.add(e.bodyB.position,e.pointB):e.pointB,n=r.magnitude(r.sub(t,i));e.length=void 0!==e.length?e.length:n,e.id=e.id||c.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var o={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e.length&&e.stiffness>.1?(o.type="pin",o.anchors=!1):e.stiffness<.9&&(o.type="spring"),e.render=c.extend(o,e.render),e},n.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var i=e[t],n=i.constraintImpulse;i.isStatic||0===n.x&&0===n.y&&0===n.angle||(i.position.x+=n.x,i.position.y+=n.y,i.angle+=n.angle)}},n.solveAll=function(e,t){for(var i=c.clamp(t/c._baseDelta,0,1),o=0;o<e.length;o+=1){var r=e[o],s=!r.bodyA||r.bodyA&&r.bodyA.isStatic,a=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(s||a)&&n.solve(e[o],i)}for(o=0;o<e.length;o+=1)s=!(r=e[o]).bodyA||r.bodyA&&r.bodyA.isStatic,a=!r.bodyB||r.bodyB&&r.bodyB.isStatic,s||a||n.solve(e[o],i)},n.solve=function(e,t){var i=e.bodyA,o=e.bodyB,s=e.pointA,a=e.pointB;if(i||o){i&&!i.isStatic&&(r.rotate(s,i.angle-e.angleA,s),e.angleA=i.angle),o&&!o.isStatic&&(r.rotate(a,o.angle-e.angleB,a),e.angleB=o.angle);var l=s,c=a;if(i&&(l=r.add(i.position,s)),o&&(c=r.add(o.position,a)),l&&c){var u=r.sub(l,c),d=r.magnitude(u);d<n._minLength&&(d=n._minLength);var p,f,h,m,_,g=(d-e.length)/d,b=e.stiffness>=1||0===e.length?e.stiffness*t:e.stiffness*t*t,v=e.damping*t,y=r.mult(u,g*b),x=(i?i.inverseMass:0)+(o?o.inverseMass:0),w=x+((i?i.inverseInertia:0)+(o?o.inverseInertia:0));if(v>0){var S=r.create();h=r.div(u,d),_=r.sub(o&&r.sub(o.position,o.positionPrev)||S,i&&r.sub(i.position,i.positionPrev)||S),m=r.dot(h,_)}i&&!i.isStatic&&(f=i.inverseMass/x,i.constraintImpulse.x-=y.x*f,i.constraintImpulse.y-=y.y*f,i.position.x-=y.x*f,i.position.y-=y.y*f,v>0&&(i.positionPrev.x-=v*h.x*m*f,i.positionPrev.y-=v*h.y*m*f),p=r.cross(s,y)/w*n._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle-=p,i.angle-=p),o&&!o.isStatic&&(f=o.inverseMass/x,o.constraintImpulse.x+=y.x*f,o.constraintImpulse.y+=y.y*f,o.position.x+=y.x*f,o.position.y+=y.y*f,v>0&&(o.positionPrev.x+=v*h.x*m*f,o.positionPrev.y+=v*h.y*m*f),p=r.cross(a,y)/w*n._torqueDampen*o.inverseInertia*(1-e.angularStiffness),o.constraintImpulse.angle+=p,o.angle+=p)}}},n.postSolveAll=function(e){for(var t=0;t<e.length;t++){var i=e[t],c=i.constraintImpulse;if(!i.isStatic&&(0!==c.x||0!==c.y||0!==c.angle)){s.set(i,!1);for(var u=0;u<i.parts.length;u++){var d=i.parts[u];o.translate(d.vertices,c),u>0&&(d.position.x+=c.x,d.position.y+=c.y),0!==c.angle&&(o.rotate(d.vertices,c.angle,i.position),l.rotate(d.axes,c.angle),u>0&&r.rotateAbout(d.position,c.angle,i.position,d.position)),a.update(d.bounds,d.vertices,i.velocity)}c.angle*=n._warming,c.x*=n._warming,c.y*=n._warming}}},n.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),y:(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0)}},n.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),y:(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0)}},n.currentLength=function(e){var t=(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),i=(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0),n=(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),o=(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0),r=t-n,s=i-o;return Math.sqrt(r*r+s*s)}},function(e,t,i){var n={};e.exports=n;var o=i(2),r=i(0);n.fromVertices=function(e){for(var t={},i=0;i<e.length;i++){var n=(i+1)%e.length,s=o.normalise({x:e[n].y-e[i].y,y:e[i].x-e[n].x}),a=0===s.y?1/0:s.x/s.y;t[a=a.toFixed(3).toString()]=s}return r.values(t)},n.rotate=function(e,t){if(0!==t)for(var i=Math.cos(t),n=Math.sin(t),o=0;o<e.length;o++){var r,s=e[o];r=s.x*i-s.y*n,s.y=s.x*n+s.y*i,s.x=r}}},function(e,t,i){var n={};e.exports=n;var o=i(3),r=i(0),s=i(4),a=i(1),l=i(2);n.rectangle=function(e,t,i,n,a){a=a||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:o.fromPath("L 0 0 L "+i+" 0 L "+i+" "+n+" L 0 "+n)};if(a.chamfer){var c=a.chamfer;l.vertices=o.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return s.create(r.extend({},l,a))},n.trapezoid=function(e,t,i,n,a,l){l=l||{},a>=1&&r.warn("Bodies.trapezoid: slope parameter must be < 1.");var c,u=(1-2*(a*=.5))*i,d=i*a,p=d+u,f=p+d;c=a<.5?"L 0 0 L "+d+" "+-n+" L "+p+" "+-n+" L "+f+" 0":"L 0 0 L "+p+" "+-n+" L "+f+" 0";var h={label:"Trapezoid Body",position:{x:e,y:t},vertices:o.fromPath(c)};if(l.chamfer){var m=l.chamfer;h.vertices=o.chamfer(h.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete l.chamfer}return s.create(r.extend({},h,l))},n.circle=function(e,t,i,o,s){o=o||{};var a=Math.ceil(Math.max(10,Math.min(s=s||25,i)));return a%2==1&&(a+=1),n.polygon(e,t,a,i,r.extend({},{label:"Circle Body",circleRadius:i},o))},n.polygon=function(e,t,i,a,l){if(l=l||{},i<3)return n.circle(e,t,a,l);for(var c=2*Math.PI/i,u="",d=.5*c,p=0;p<i;p+=1){var f=d+p*c,h=Math.cos(f)*a,m=Math.sin(f)*a;u+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var _={label:"Polygon Body",position:{x:e,y:t},vertices:o.fromPath(u)};if(l.chamfer){var g=l.chamfer;_.vertices=o.chamfer(_.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete l.chamfer}return s.create(r.extend({},_,l))},n.fromVertices=function(e,t,i,n,c,u,d,p){var f,h,m,_,g,b,v,y,x,w,S=r.getDecomp();for(f=!!(S&&S.quickDecomp),n=n||{},m=[],c=void 0!==c&&c,u=void 0!==u?u:.01,d=void 0!==d?d:10,p=void 0!==p?p:.01,r.isArray(i[0])||(i=[i]),x=0;x<i.length;x+=1)if(g=i[x],(_=o.isConvex(g))||f||r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),_||!f)g=_?o.clockwiseSort(g):o.hull(g),m.push({position:{x:e,y:t},vertices:g});else{var I=g.map(function(e){return[e.x,e.y]});S.makeCCW(I),!1!==u&&S.removeCollinearPoints(I,u),!1!==p&&S.removeDuplicatePoints&&S.removeDuplicatePoints(I,p);var P=S.quickDecomp(I);for(b=0;b<P.length;b++){var A=P[b].map(function(e){return{x:e[0],y:e[1]}});d>0&&o.area(A)<d||m.push({position:o.centre(A),vertices:A})}}for(b=0;b<m.length;b++)m[b]=s.create(r.extend(m[b],n));if(c)for(b=0;b<m.length;b++){var M=m[b];for(v=b+1;v<m.length;v++){var B=m[v];if(a.overlaps(M.bounds,B.bounds)){var T=M.vertices,k=B.vertices;for(y=0;y<M.vertices.length;y++)for(w=0;w<B.vertices.length;w++){var E=l.magnitudeSquared(l.sub(T[(y+1)%T.length],k[w])),C=l.magnitudeSquared(l.sub(T[y],k[(w+1)%k.length]));E<5&&C<5&&(T[y].isInternal=!0,k[w].isInternal=!0)}}}}return m.length>1?(h=s.create(r.extend({parts:m.slice(0)},n)),s.setPosition(h,{x:e,y:t}),h):m[0]}},function(e,t,i){var n={};e.exports=n;var o=i(0),r=i(8);n.create=function(e){return o.extend({bodies:[],collisions:[],pairs:null},e)},n.setBodies=function(e,t){e.bodies=t.slice(0)},n.clear=function(e){e.bodies=[],e.collisions=[]},n.collisions=function(e){var t,i,o=e.pairs,s=e.bodies,a=s.length,l=n.canCollide,c=r.collides,u=e.collisions,d=0;for(s.sort(n._compareBoundsX),t=0;t<a;t++){var p=s[t],f=p.bounds,h=p.bounds.max.x,m=p.bounds.max.y,_=p.bounds.min.y,g=p.isStatic||p.isSleeping,b=p.parts.length,v=1===b;for(i=t+1;i<a;i++){var y=s[i],x=y.bounds;if(x.min.x>h)break;if(!(m<x.min.y)&&!(_>x.max.y)&&(!g||!y.isStatic&&!y.isSleeping)&&l(p.collisionFilter,y.collisionFilter)){var w=y.parts.length;if(v&&1===w){var S=c(p,y,o);S&&(u[d++]=S)}else for(var I=+(b>1),P=+(w>1),A=I;A<b;A++)for(var M=p.parts[A],f=M.bounds,B=P;B<w;B++){var T=y.parts[B],x=T.bounds;if(!(f.min.x>x.max.x)&&!(f.max.x<x.min.x)&&!(f.max.y<x.min.y)&&!(f.min.y>x.max.y)){var S=c(M,T,o);S&&(u[d++]=S)}}}}}return u.length!==d&&(u.length=d),u},n.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:(e.mask&t.category)!=0&&(t.mask&e.category)!=0},n._compareBoundsX=function(e,t){return e.bounds.min.x-t.bounds.min.x}},function(e,t,i){var n={};e.exports=n;var o=i(0);n.create=function(e){var t={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=parseInt(t.element.getAttribute("data-pixel-ratio"),10)||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var i=n._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var i=n._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var i=n._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault(),t.sourceEvents.mousewheel=e},n.setElement(t,t.element),t},n.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove,{passive:!0}),t.addEventListener("mousedown",e.mousedown,{passive:!0}),t.addEventListener("mouseup",e.mouseup,{passive:!0}),t.addEventListener("wheel",e.mousewheel,{passive:!1}),t.addEventListener("touchmove",e.mousemove,{passive:!1}),t.addEventListener("touchstart",e.mousedown,{passive:!1}),t.addEventListener("touchend",e.mouseup,{passive:!1})},n.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},n.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},n.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},n._getRelativeMousePosition=function(e,t,i){var n,o,r=t.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,c=e.changedTouches;return c?(n=c[0].pageX-r.left-a,o=c[0].pageY-r.top-l):(n=e.pageX-r.left-a,o=e.pageY-r.top-l),{x:n/(t.clientWidth/(t.width||t.clientWidth)*i),y:o/(t.clientHeight/(t.height||t.clientHeight)*i)}}},function(e,t,i){var n={};e.exports=n;var o=i(0);n._registry={},n.register=function(e){if(n.isPlugin(e)||o.warn("Plugin.register:",n.toString(e),"does not implement all required fields."),e.name in n._registry){var t=n._registry[e.name],i=n.versionParse(e.version).number,r=n.versionParse(t.version).number;i>r?(o.warn("Plugin.register:",n.toString(t),"was upgraded to",n.toString(e)),n._registry[e.name]=e):i<r?o.warn("Plugin.register:",n.toString(t),"can not be downgraded to",n.toString(e)):e!==t&&o.warn("Plugin.register:",n.toString(e),"is already registered to different plugin object")}else n._registry[e.name]=e;return e},n.resolve=function(e){return n._registry[n.dependencyParse(e).name]},n.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},n.isPlugin=function(e){return e&&e.name&&e.version&&e.install},n.isUsed=function(e,t){return e.used.indexOf(t)>-1},n.isFor=function(e,t){var i=e.for&&n.dependencyParse(e.for);return!e.for||t.name===i.name&&n.versionSatisfies(t.version,i.range)},n.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0===e.uses.length){o.warn("Plugin.use:",n.toString(e),"does not specify any dependencies to install.");return}for(var i=n.dependencies(e),r=o.topologicalSort(i),s=[],a=0;a<r.length;a+=1)if(r[a]!==e.name){var l=n.resolve(r[a]);if(!l){s.push("❌ "+r[a]);continue}n.isUsed(e,l.name)||(n.isFor(l,e)||(o.warn("Plugin.use:",n.toString(l),"is for",l.for,"but installed on",n.toString(e)+"."),l._warned=!0),l.install?l.install(e):(o.warn("Plugin.use:",n.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(s.push("\uD83D\uDD36 "+n.toString(l)),delete l._warned):s.push("✅ "+n.toString(l)),e.used.push(l.name))}s.length>0&&o.info(s.join("  "))},n.dependencies=function(e,t){var i=n.dependencyParse(e),r=i.name;if(!(r in(t=t||{}))){e=n.resolve(e)||e,t[r]=o.map(e.uses||[],function(t){n.isPlugin(t)&&n.register(t);var r=n.dependencyParse(t),s=n.resolve(t);return s&&!n.versionSatisfies(s.version,r.range)?(o.warn("Plugin.dependencies:",n.toString(s),"does not satisfy",n.toString(r),"used by",n.toString(i)+"."),s._warned=!0,e._warned=!0):s||(o.warn("Plugin.dependencies:",n.toString(t),"used by",n.toString(i),"could not be resolved."),e._warned=!0),r.name});for(var s=0;s<t[r].length;s+=1)n.dependencies(t[r][s],t);return t}},n.dependencyParse=function(e){return o.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(e)||o.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},n.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;t.test(e)||o.warn("Plugin.versionParse:",e,"is not a valid version or range.");var i=t.exec(e),n=Number(i[4]),r=Number(i[5]),s=Number(i[6]);return{isRange:!!(i[1]||i[2]),version:i[3],range:e,operator:i[1]||i[2]||"",major:n,minor:r,patch:s,parts:[n,r,s],prerelease:i[7],number:1e8*n+1e4*r+s}},n.versionSatisfies=function(e,t){t=t||"*";var i=n.versionParse(t),o=n.versionParse(e);if(i.isRange){if("*"===i.operator||"*"===e)return!0;if(">"===i.operator)return o.number>i.number;if(">="===i.operator)return o.number>=i.number;if("~"===i.operator)return o.major===i.major&&o.minor===i.minor&&o.patch>=i.patch;if("^"===i.operator)return i.major>0?o.major===i.major&&o.number>=i.number:i.minor>0?o.minor===i.minor&&o.patch>=i.patch:o.patch===i.patch}return e===t||"*"===e}},function(e,t){var i={};e.exports=i,i.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}},function(e,t,i){var n={};e.exports=n;var o=i(7),r=i(18),s=i(13),a=i(19),l=i(5),c=i(6),u=i(10),d=i(0),p=i(4);n._deltaMax=1e3/60,n.create=function(e){e=e||{};var t=d.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},e);return t.world=e.world||c.create({label:"World"}),t.pairs=e.pairs||a.create(),t.detector=e.detector||s.create(),t.detector.pairs=t.pairs,t.grid={buckets:[]},t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},n.update=function(e,t){var i,p=d.now(),f=e.world,h=e.detector,m=e.pairs,_=e.timing,g=_.timestamp;t>n._deltaMax&&d.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",n._deltaMax.toFixed(3),"ms."),t=(void 0!==t?t:d._baseDelta)*_.timeScale,_.timestamp+=t,_.lastDelta=t;var b={timestamp:_.timestamp,delta:t};l.trigger(e,"beforeUpdate",b);var v=c.allBodies(f),y=c.allConstraints(f);for(f.isModified&&(s.setBodies(h,v),c.setModified(f,!1,!1,!0)),e.enableSleeping&&o.update(v,t),n._bodiesApplyGravity(v,e.gravity),t>0&&n._bodiesUpdate(v,t),l.trigger(e,"beforeSolve",b),u.preSolveAll(v),i=0;i<e.constraintIterations;i++)u.solveAll(y,t);u.postSolveAll(v);var x=s.collisions(h);a.update(m,x,g),e.enableSleeping&&o.afterCollisions(m.list),m.collisionStart.length>0&&l.trigger(e,"collisionStart",{pairs:m.collisionStart,timestamp:_.timestamp,delta:t});var w=d.clamp(20/e.positionIterations,0,1);for(r.preSolvePosition(m.list),i=0;i<e.positionIterations;i++)r.solvePosition(m.list,t,w);for(r.postSolvePosition(v),u.preSolveAll(v),i=0;i<e.constraintIterations;i++)u.solveAll(y,t);for(u.postSolveAll(v),r.preSolveVelocity(m.list),i=0;i<e.velocityIterations;i++)r.solveVelocity(m.list,t);return n._bodiesUpdateVelocities(v),m.collisionActive.length>0&&l.trigger(e,"collisionActive",{pairs:m.collisionActive,timestamp:_.timestamp,delta:t}),m.collisionEnd.length>0&&l.trigger(e,"collisionEnd",{pairs:m.collisionEnd,timestamp:_.timestamp,delta:t}),n._bodiesClearForces(v),l.trigger(e,"afterUpdate",b),e.timing.lastElapsed=d.now()-p,e},n.merge=function(e,t){if(d.extend(e,t),t.world){e.world=t.world,n.clear(e);for(var i=c.allBodies(e.world),r=0;r<i.length;r++){var s=i[r];o.set(s,!1),s.id=d.nextId()}}},n.clear=function(e){a.clear(e.pairs),s.clear(e.detector)},n._bodiesClearForces=function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i];n.force.x=0,n.force.y=0,n.torque=0}},n._bodiesApplyGravity=function(e,t){var i=void 0!==t.scale?t.scale:.001,n=e.length;if((0!==t.x||0!==t.y)&&0!==i)for(var o=0;o<n;o++){var r=e[o];r.isStatic||r.isSleeping||(r.force.y+=r.mass*t.y*i,r.force.x+=r.mass*t.x*i)}},n._bodiesUpdate=function(e,t){for(var i=e.length,n=0;n<i;n++){var o=e[n];o.isStatic||o.isSleeping||p.update(o,t)}},n._bodiesUpdateVelocities=function(e){for(var t=e.length,i=0;i<t;i++)p.updateVelocities(e[i])}},function(e,t,i){var n={};e.exports=n;var o=i(3),r=i(0),s=i(1);n._restingThresh=2,n._restingThreshTangent=Math.sqrt(6),n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n._frictionMaxStatic=Number.MAX_VALUE,n.preSolvePosition=function(e){var t,i,n,o=e.length;for(t=0;t<o;t++)(i=e[t]).isActive&&(n=i.contactCount,i.collision.parentA.totalContacts+=n,i.collision.parentB.totalContacts+=n)},n.solvePosition=function(e,t,i){var o,s,a,l,c,u,d,p,f=n._positionDampen*(i||1),h=r.clamp(t/r._baseDelta,0,1),m=e.length;for(o=0;o<m;o++)(s=e[o]).isActive&&!s.isSensor&&(l=(a=s.collision).parentA,c=a.parentB,u=a.normal,s.separation=a.depth+u.x*(c.positionImpulse.x-l.positionImpulse.x)+u.y*(c.positionImpulse.y-l.positionImpulse.y));for(o=0;o<m;o++)(s=e[o]).isActive&&!s.isSensor&&(l=(a=s.collision).parentA,c=a.parentB,u=a.normal,p=s.separation-s.slop*h,(l.isStatic||c.isStatic)&&(p*=2),l.isStatic||l.isSleeping||(d=f/l.totalContacts,l.positionImpulse.x+=u.x*p*d,l.positionImpulse.y+=u.y*p*d),c.isStatic||c.isSleeping||(d=f/c.totalContacts,c.positionImpulse.x-=u.x*p*d,c.positionImpulse.y-=u.y*p*d))},n.postSolvePosition=function(e){for(var t=n._positionWarming,i=e.length,r=o.translate,a=s.update,l=0;l<i;l++){var c=e[l],u=c.positionImpulse,d=u.x,p=u.y,f=c.velocity;if(c.totalContacts=0,0!==d||0!==p){for(var h=0;h<c.parts.length;h++){var m=c.parts[h];r(m.vertices,u),a(m.bounds,m.vertices,f),m.position.x+=d,m.position.y+=p}c.positionPrev.x+=d,c.positionPrev.y+=p,d*f.x+p*f.y<0?(u.x=0,u.y=0):(u.x*=t,u.y*=t)}}},n.preSolveVelocity=function(e){var t,i,n=e.length;for(t=0;t<n;t++){var o=e[t];if(o.isActive&&!o.isSensor){var r=o.contacts,s=o.contactCount,a=o.collision,l=a.parentA,c=a.parentB,u=a.normal,d=a.tangent;for(i=0;i<s;i++){var p=r[i],f=p.vertex,h=p.normalImpulse,m=p.tangentImpulse;if(0!==h||0!==m){var _=u.x*h+d.x*m,g=u.y*h+d.y*m;l.isStatic||l.isSleeping||(l.positionPrev.x+=_*l.inverseMass,l.positionPrev.y+=g*l.inverseMass,l.anglePrev+=l.inverseInertia*((f.x-l.position.x)*g-(f.y-l.position.y)*_)),c.isStatic||c.isSleeping||(c.positionPrev.x-=_*c.inverseMass,c.positionPrev.y-=g*c.inverseMass,c.anglePrev-=c.inverseInertia*((f.x-c.position.x)*g-(f.y-c.position.y)*_))}}}}},n.solveVelocity=function(e,t){var i,o,s,a,l=t/r._baseDelta,c=l*l*l,u=-n._restingThresh*l,d=n._restingThreshTangent,p=n._frictionNormalMultiplier*l,f=n._frictionMaxStatic,h=e.length;for(s=0;s<h;s++){var m=e[s];if(m.isActive&&!m.isSensor){var _=m.collision,g=_.parentA,b=_.parentB,v=_.normal.x,y=_.normal.y,x=_.tangent.x,w=_.tangent.y,S=m.inverseMass,I=m.friction*m.frictionStatic*p,P=m.contacts,A=m.contactCount,M=1/A,B=g.position.x-g.positionPrev.x,T=g.position.y-g.positionPrev.y,k=g.angle-g.anglePrev,E=b.position.x-b.positionPrev.x,C=b.position.y-b.positionPrev.y,F=b.angle-b.anglePrev;for(a=0;a<A;a++){var R=P[a],O=R.vertex,D=O.x-g.position.x,L=O.y-g.position.y,j=O.x-b.position.x,V=O.y-b.position.y,N=B-L*k-(E-V*F),q=T+D*k-(C+j*F),H=v*N+y*q,U=x*N+w*q,W=m.separation+H,G=Math.min(W,1),z=(G=W<0?0:G)*I;U<-z||U>z?(o=U>0?U:-U,(i=m.friction*(U>0?1:-1)*c)<-o?i=-o:i>o&&(i=o)):(i=U,o=f);var Z=D*y-L*v,X=j*y-V*v,Q=M/(S+g.inverseInertia*Z*Z+b.inverseInertia*X*X),$=(1+m.restitution)*H*Q;if(i*=Q,H<u)R.normalImpulse=0;else{var Y=R.normalImpulse;R.normalImpulse+=$,R.normalImpulse>0&&(R.normalImpulse=0),$=R.normalImpulse-Y}if(U<-d||U>d)R.tangentImpulse=0;else{var J=R.tangentImpulse;R.tangentImpulse+=i,R.tangentImpulse<-o&&(R.tangentImpulse=-o),R.tangentImpulse>o&&(R.tangentImpulse=o),i=R.tangentImpulse-J}var K=v*$+x*i,ee=y*$+w*i;g.isStatic||g.isSleeping||(g.positionPrev.x+=K*g.inverseMass,g.positionPrev.y+=ee*g.inverseMass,g.anglePrev+=(D*ee-L*K)*g.inverseInertia),b.isStatic||b.isSleeping||(b.positionPrev.x-=K*b.inverseMass,b.positionPrev.y-=ee*b.inverseMass,b.anglePrev-=(j*ee-V*K)*b.inverseInertia)}}}}},function(e,t,i){var n={};e.exports=n;var o=i(9),r=i(0);n.create=function(e){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},n.update=function(e,t,i){var n,r,s,a=o.update,l=o.create,c=o.setActive,u=e.table,d=e.list,p=d.length,f=p,h=e.collisionStart,m=e.collisionEnd,_=e.collisionActive,g=t.length,b=0,v=0,y=0;for(s=0;s<g;s++)(r=(n=t[s]).pair)?(r.isActive&&(_[y++]=r),a(r,n,i)):(u[(r=l(n,i)).id]=r,h[b++]=r,d[f++]=r);for(s=0,f=0,p=d.length;s<p;s++)(r=d[s]).timeUpdated>=i?d[f++]=r:(c(r,!1,i),r.collision.bodyA.sleepCounter>0&&r.collision.bodyB.sleepCounter>0?d[f++]=r:(m[v++]=r,delete u[r.id]));d.length!==f&&(d.length=f),h.length!==b&&(h.length=b),m.length!==v&&(m.length=v),_.length!==y&&(_.length=y)},n.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,i){var n=e.exports=i(21);n.Axes=i(11),n.Bodies=i(12),n.Body=i(4),n.Bounds=i(1),n.Collision=i(8),n.Common=i(0),n.Composite=i(6),n.Composites=i(22),n.Constraint=i(10),n.Contact=i(16),n.Detector=i(13),n.Engine=i(17),n.Events=i(5),n.Grid=i(23),n.Mouse=i(14),n.MouseConstraint=i(24),n.Pair=i(9),n.Pairs=i(19),n.Plugin=i(15),n.Query=i(25),n.Render=i(26),n.Resolver=i(18),n.Runner=i(27),n.SAT=i(28),n.Sleeping=i(7),n.Svg=i(29),n.Vector=i(2),n.Vertices=i(3),n.World=i(30),n.Engine.run=n.Runner.run,n.Common.deprecated(n.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(e,t,i){var n={};e.exports=n;var o=i(15),r=i(0);n.name="matter-js",n.version="0.20.0",n.uses=[],n.used=[],n.use=function(){o.use(n,Array.prototype.slice.call(arguments))},n.before=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathBefore(n,e,t)},n.after=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathAfter(n,e,t)}},function(e,t,i){var n={};e.exports=n;var o=i(6),r=i(10),s=i(0),a=i(4),l=i(12),c=s.deprecated;n.stack=function(e,t,i,n,r,s,l){for(var c,u=o.create({label:"Stack"}),d=e,p=t,f=0,h=0;h<n;h++){for(var m=0,_=0;_<i;_++){var g=l(d,p,_,h,c,f);if(g){var b=g.bounds.max.y-g.bounds.min.y,v=g.bounds.max.x-g.bounds.min.x;b>m&&(m=b),a.translate(g,{x:.5*v,y:.5*b}),d=g.bounds.max.x+r,o.addBody(u,g),c=g,f+=1}else d+=r}p+=m+s,d=e}return u},n.chain=function(e,t,i,n,a,l){for(var c=e.bodies,u=1;u<c.length;u++){var d=c[u-1],p=c[u],f=d.bounds.max.y-d.bounds.min.y,h=d.bounds.max.x-d.bounds.min.x,m=p.bounds.max.y-p.bounds.min.y,_=p.bounds.max.x-p.bounds.min.x,g={bodyA:d,pointA:{x:h*t,y:f*i},bodyB:p,pointB:{x:_*n,y:m*a}},b=s.extend(g,l);o.addConstraint(e,r.create(b))}return e.label+=" Chain",e},n.mesh=function(e,t,i,n,a){var l,c,u,d,p,f=e.bodies;for(l=0;l<i;l++){for(c=1;c<t;c++)u=f[c-1+l*t],d=f[c+l*t],o.addConstraint(e,r.create(s.extend({bodyA:u,bodyB:d},a)));if(l>0)for(c=0;c<t;c++)u=f[c+(l-1)*t],d=f[c+l*t],o.addConstraint(e,r.create(s.extend({bodyA:u,bodyB:d},a))),n&&c>0&&(p=f[c-1+(l-1)*t],o.addConstraint(e,r.create(s.extend({bodyA:p,bodyB:d},a)))),n&&c<t-1&&(p=f[c+1+(l-1)*t],o.addConstraint(e,r.create(s.extend({bodyA:p,bodyB:d},a))))}return e.label+=" Mesh",e},n.pyramid=function(e,t,i,o,r,s,l){return n.stack(e,t,i,o,r,s,function(t,n,s,c,u,d){var p=Math.min(o,Math.ceil(i/2)),f=u?u.bounds.max.x-u.bounds.min.x:0;if(!(c>p)){var h=c=p-c,m=i-1-c;if(!(s<h)&&!(s>m))return 1===d&&a.translate(u,{x:(s+(i%2==1?1:-1))*f,y:0}),l(e+(u?s*f:0)+s*r,n,s,c,u,d)}})},n.newtonsCradle=function(e,t,i,n,s){for(var a=o.create({label:"Newtons Cradle"}),c=0;c<i;c++){var u=l.circle(e+1.9*n*c,t+s,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=r.create({pointA:{x:e+1.9*n*c,y:t},bodyB:u});o.addBody(a,u),o.addConstraint(a,d)}return a},c(n,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),n.car=function(e,t,i,n,s){var c=a.nextGroup(!0),u=-(.5*i)+20,d=.5*i-20,p=o.create({label:"Car"}),f=l.rectangle(e,t,i,n,{collisionFilter:{group:c},chamfer:{radius:.5*n},density:2e-4}),h=l.circle(e+u,t+0,s,{collisionFilter:{group:c},friction:.8}),m=l.circle(e+d,t+0,s,{collisionFilter:{group:c},friction:.8}),_=r.create({bodyB:f,pointB:{x:u,y:0},bodyA:h,stiffness:1,length:0}),g=r.create({bodyB:f,pointB:{x:d,y:0},bodyA:m,stiffness:1,length:0});return o.addBody(p,f),o.addBody(p,h),o.addBody(p,m),o.addConstraint(p,_),o.addConstraint(p,g),p},c(n,"car","Composites.car ➤ moved to car example"),n.softBody=function(e,t,i,o,r,a,c,u,d,p){d=s.extend({inertia:1/0},d),p=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var f=n.stack(e,t,i,o,r,a,function(e,t){return l.circle(e,t,u,d)});return n.mesh(f,i,o,c,p),f.label="Soft Body",f},c(n,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")},function(e,t,i){var n={};e.exports=n;var o=i(9),r=i(0),s=r.deprecated;n.create=function(e){return r.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},n.update=function(e,t,i,o){var r,s,a,l,c,u=i.world,d=e.buckets,p=!1;for(r=0;r<t.length;r++){var f=t[r];if((!f.isSleeping||o)&&(!u.bounds||!(f.bounds.max.x<u.bounds.min.x)&&!(f.bounds.min.x>u.bounds.max.x)&&!(f.bounds.max.y<u.bounds.min.y)&&!(f.bounds.min.y>u.bounds.max.y))){var h=n._getRegion(e,f);if(!f.region||h.id!==f.region.id||o){(!f.region||o)&&(f.region=h);var m=n._regionUnion(h,f.region);for(s=m.startCol;s<=m.endCol;s++)for(a=m.startRow;a<=m.endRow;a++){l=d[c=n._getBucketId(s,a)];var _=s>=h.startCol&&s<=h.endCol&&a>=h.startRow&&a<=h.endRow,g=s>=f.region.startCol&&s<=f.region.endCol&&a>=f.region.startRow&&a<=f.region.endRow;!_&&g&&g&&l&&n._bucketRemoveBody(e,l,f),(f.region===h||_&&!g||o)&&(l||(l=n._createBucket(d,c)),n._bucketAddBody(e,l,f))}f.region=h,p=!0}}}p&&(e.pairsList=n._createActivePairsList(e))},s(n,"update","Grid.update ➤ replaced by Matter.Detector"),n.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},s(n,"clear","Grid.clear ➤ replaced by Matter.Detector"),n._regionUnion=function(e,t){var i=Math.min(e.startCol,t.startCol),o=Math.max(e.endCol,t.endCol),r=Math.min(e.startRow,t.startRow),s=Math.max(e.endRow,t.endRow);return n._createRegion(i,o,r,s)},n._getRegion=function(e,t){var i=t.bounds,o=Math.floor(i.min.x/e.bucketWidth),r=Math.floor(i.max.x/e.bucketWidth),s=Math.floor(i.min.y/e.bucketHeight),a=Math.floor(i.max.y/e.bucketHeight);return n._createRegion(o,r,s,a)},n._createRegion=function(e,t,i,n){return{id:e+","+t+","+i+","+n,startCol:e,endCol:t,startRow:i,endRow:n}},n._getBucketId=function(e,t){return"C"+e+"R"+t},n._createBucket=function(e,t){return e[t]=[]},n._bucketAddBody=function(e,t,i){var n,r=e.pairs,s=o.id,a=t.length;for(n=0;n<a;n++){var l=t[n];if(i.id!==l.id&&(!i.isStatic||!l.isStatic)){var c=s(i,l),u=r[c];u?u[2]+=1:r[c]=[i,l,1]}}t.push(i)},n._bucketRemoveBody=function(e,t,i){var n,s=e.pairs,a=o.id;t.splice(r.indexOf(t,i),1);var l=t.length;for(n=0;n<l;n++){var c=s[a(i,t[n])];c&&(c[2]-=1)}},n._createActivePairsList=function(e){var t,i,n=e.pairs,o=r.keys(n),s=o.length,a=[];for(i=0;i<s;i++)(t=n[o[i]])[2]>0?a.push(t):delete n[o[i]];return a}},function(e,t,i){var n={};e.exports=n;var o=i(3),r=i(7),s=i(14),a=i(5),l=i(13),c=i(10),u=i(6),d=i(0),p=i(1);n.create=function(e,t){var i=(e?e.mouse:null)||(t?t.mouse:null);i||(e&&e.render&&e.render.canvas?i=s.create(e.render.canvas):t&&t.element?i=s.create(t.element):(i=s.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var o=c.create({label:"Mouse Constraint",pointA:i.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),r={type:"mouseConstraint",mouse:i,element:null,body:null,constraint:o,collisionFilter:{category:1,mask:0xffffffff,group:0}},l=d.extend(r,t);return a.on(e,"beforeUpdate",function(){var t=u.allBodies(e.world);n.update(l,t),n._triggerEvents(l)}),l},n.update=function(e,t){var i=e.mouse,n=e.constraint,s=e.body;if(0===i.button){if(n.bodyB)r.set(n.bodyB,!1),n.pointA=i.position;else for(var c=0;c<t.length;c++)if(s=t[c],p.contains(s.bounds,i.position)&&l.canCollide(s.collisionFilter,e.collisionFilter))for(var u=+(s.parts.length>1);u<s.parts.length;u++){var d=s.parts[u];if(o.contains(d.vertices,i.position)){n.pointA=i.position,n.bodyB=e.body=s,n.pointB={x:i.position.x-s.position.x,y:i.position.y-s.position.y},n.angleB=s.angle,r.set(s,!1),a.trigger(e,"startdrag",{mouse:i,body:s});break}}}else n.bodyB=e.body=null,n.pointB=null,s&&a.trigger(e,"enddrag",{mouse:i,body:s})},n._triggerEvents=function(e){var t=e.mouse,i=t.sourceEvents;i.mousemove&&a.trigger(e,"mousemove",{mouse:t}),i.mousedown&&a.trigger(e,"mousedown",{mouse:t}),i.mouseup&&a.trigger(e,"mouseup",{mouse:t}),s.clearSourceEvents(t)}},function(e,t,i){var n={};e.exports=n;var o=i(2),r=i(8),s=i(1),a=i(12),l=i(3);n.collides=function(e,t){for(var i=[],n=t.length,o=e.bounds,a=r.collides,l=s.overlaps,c=0;c<n;c++){var u=t[c],d=u.parts.length,p=+(1!==d);if(l(u.bounds,o))for(var f=p;f<d;f++){var h=u.parts[f];if(l(h.bounds,o)){var m=a(h,e);if(m){i.push(m);break}}}}return i},n.ray=function(e,t,i,r){r=r||1e-100;for(var s=o.angle(t,i),l=o.magnitude(o.sub(t,i)),c=(i.x+t.x)*.5,u=(i.y+t.y)*.5,d=a.rectangle(c,u,l,r,{angle:s}),p=n.collides(d,e),f=0;f<p.length;f+=1){var h=p[f];h.body=h.bodyB=h.bodyA}return p},n.region=function(e,t,i){for(var n=[],o=0;o<e.length;o++){var r=e[o],a=s.overlaps(r.bounds,t);(a&&!i||!a&&i)&&n.push(r)}return n},n.point=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=e[n];if(s.contains(o.bounds,t))for(var r=+(1!==o.parts.length);r<o.parts.length;r++){var a=o.parts[r];if(s.contains(a.bounds,t)&&l.contains(a.vertices,t)){i.push(o);break}}}return i}},function(e,t,i){var n,o,r,s,a,l,c,u,d={};e.exports=d;var p=i(4),f=i(0),h=i(6),m=i(1),_=i(5),g=i(2),b=i(14);"undefined"!=typeof window&&(n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(f.now())},1e3/60)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),d._goodFps=30,d._goodDelta=1e3/60,d.create=function(e){var t={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},i=f.extend(t,e);return i.canvas&&(i.canvas.width=i.options.width||i.canvas.width,i.canvas.height=i.options.height||i.canvas.height),i.mouse=e.mouse,i.engine=e.engine,i.canvas=i.canvas||a(i.options.width,i.options.height),i.context=i.canvas.getContext("2d"),i.textures={},i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.canvas.width,y:i.canvas.height}},i.controller=d,i.options.showBroadphase=!1,1!==i.options.pixelRatio&&d.setPixelRatio(i,i.options.pixelRatio),f.isElement(i.element)&&i.element.appendChild(i.canvas),i},d.run=function(e){!function t(i){e.frameRequestId=n(t),r(e,i),d.world(e,i),e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0),(e.options.showStats||e.options.showDebug)&&d.stats(e,e.context,i),(e.options.showPerformance||e.options.showDebug)&&d.performance(e,e.context,i),e.context.setTransform(1,0,0,1,0,0)}()},d.stop=function(e){o(e.frameRequestId)},d.setPixelRatio=function(e,t){var i=e.options,n=e.canvas;"auto"===t&&(t=l(n)),i.pixelRatio=t,n.setAttribute("data-pixel-ratio",t),n.width=i.width*t,n.height=i.height*t,n.style.width=i.width+"px",n.style.height=i.height+"px"},d.setSize=function(e,t,i){e.options.width=t,e.options.height=i,e.bounds.max.x=e.bounds.min.x+t,e.bounds.max.y=e.bounds.min.y+i,1!==e.options.pixelRatio?d.setPixelRatio(e,e.options.pixelRatio):(e.canvas.width=t,e.canvas.height=i)},d.lookAt=function(e,t,i,n){n=void 0===n||n,t=f.isArray(t)?t:[t],i=i||{x:0,y:0};for(var o={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},r=0;r<t.length;r+=1){var s=t[r],a=s.bounds?s.bounds.min:s.min||s.position||s,l=s.bounds?s.bounds.max:s.max||s.position||s;a&&l&&(a.x<o.min.x&&(o.min.x=a.x),l.x>o.max.x&&(o.max.x=l.x),a.y<o.min.y&&(o.min.y=a.y),l.y>o.max.y&&(o.max.y=l.y))}var c=o.max.x-o.min.x+2*i.x,u=o.max.y-o.min.y+2*i.y,d=e.canvas.height,p=e.canvas.width/d,h=c/u,m=1,_=1;h>p?_=h/p:m=p/h,e.options.hasBounds=!0,e.bounds.min.x=o.min.x,e.bounds.max.x=o.min.x+c*m,e.bounds.min.y=o.min.y,e.bounds.max.y=o.min.y+u*_,n&&(e.bounds.min.x+=.5*c-c*m*.5,e.bounds.max.x+=.5*c-c*m*.5,e.bounds.min.y+=.5*u-u*_*.5,e.bounds.max.y+=.5*u-u*_*.5),e.bounds.min.x-=i.x,e.bounds.max.x-=i.x,e.bounds.min.y-=i.y,e.bounds.max.y-=i.y,e.mouse&&(b.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),b.setOffset(e.mouse,e.bounds.min))},d.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,i=e.bounds.max.y-e.bounds.min.y,n=t/e.options.width,o=i/e.options.height;e.context.setTransform(e.options.pixelRatio/n,0,0,e.options.pixelRatio/o,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},d.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},d.world=function(e,t){var i,n=f.now(),o=e.engine,r=o.world,s=e.canvas,a=e.context,l=e.options,c=e.timing,p=h.allBodies(r),v=h.allConstraints(r),y=l.wireframes?l.wireframeBackground:l.background,x=[],w=[],S={timestamp:o.timing.timestamp};if(_.trigger(e,"beforeRender",S),e.currentBackground!==y&&u(e,y),a.globalCompositeOperation="source-in",a.fillStyle="transparent",a.fillRect(0,0,s.width,s.height),a.globalCompositeOperation="source-over",l.hasBounds){for(i=0;i<p.length;i++){var I=p[i];m.overlaps(I.bounds,e.bounds)&&x.push(I)}for(i=0;i<v.length;i++){var P=v[i],A=P.bodyA,M=P.bodyB,B=P.pointA,T=P.pointB;A&&(B=g.add(A.position,P.pointA)),M&&(T=g.add(M.position,P.pointB)),B&&T&&(m.contains(e.bounds,B)||m.contains(e.bounds,T))&&w.push(P)}d.startViewTransform(e),e.mouse&&(b.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),b.setOffset(e.mouse,e.bounds.min))}else w=v,x=p,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!l.wireframes||o.enableSleeping&&l.showSleeping?d.bodies(e,x,a):(l.showConvexHulls&&d.bodyConvexHulls(e,x,a),d.bodyWireframes(e,x,a)),l.showBounds&&d.bodyBounds(e,x,a),(l.showAxes||l.showAngleIndicator)&&d.bodyAxes(e,x,a),l.showPositions&&d.bodyPositions(e,x,a),l.showVelocity&&d.bodyVelocity(e,x,a),l.showIds&&d.bodyIds(e,x,a),l.showSeparations&&d.separations(e,o.pairs.list,a),l.showCollisions&&d.collisions(e,o.pairs.list,a),l.showVertexNumbers&&d.vertexNumbers(e,x,a),l.showMousePosition&&d.mousePosition(e,e.mouse,a),d.constraints(w,a),l.hasBounds&&d.endViewTransform(e),_.trigger(e,"afterRender",S),c.lastElapsed=f.now()-n},d.stats=function(e,t,i){for(var n=e.engine,o=n.world,r=h.allBodies(o),s=0,a=0,l=0;l<r.length;l+=1)s+=r[l].parts.length;var c={Part:s,Body:r.length,Cons:h.allConstraints(o).length,Comp:h.allComposites(o).length,Pair:n.pairs.list.length};for(var u in t.fillStyle="#0e0f19",t.fillRect(a,0,302.5,44),t.font="12px Arial",t.textBaseline="top",t.textAlign="right",c){var d=c[u];t.fillStyle="#aaa",t.fillText(u,a+55,8),t.fillStyle="#eee",t.fillText(d,a+55,26),a+=55}},d.performance=function(e,t){var i=e.engine,n=e.timing,o=n.deltaHistory,r=n.elapsedHistory,a=n.timestampElapsedHistory,l=n.engineDeltaHistory,c=n.engineUpdatesHistory,u=n.engineElapsedHistory,p=i.timing.lastUpdatesPerFrame,h=i.timing.lastDelta,m=s(o),_=s(r),g=s(l),b=s(c),v=s(u),y=s(a)/m||0,x=Math.round(m/h),w=1e3/m||0;t.fillStyle="#0e0f19",t.fillRect(0,50,442,34),d.status(t,10,69,60,4,o.length,Math.round(w)+" fps",w/d._goodFps,function(e){return o[e]/m-1}),d.status(t,82,69,60,4,l.length,h.toFixed(2)+" dt",d._goodDelta/h,function(e){return l[e]/g-1}),d.status(t,154,69,60,4,c.length,p+" upf",Math.pow(f.clamp(b/x||1,0,1),4),function(e){return c[e]/b-1}),d.status(t,226,69,60,4,u.length,v.toFixed(2)+" ut",1-p*v/d._goodFps,function(e){return u[e]/v-1}),d.status(t,298,69,60,4,r.length,_.toFixed(2)+" rt",1-_/d._goodFps,function(e){return r[e]/_-1}),d.status(t,370,69,60,4,a.length,y.toFixed(2)+" x",y*y*y,function(e){return(a[e]/o[e]/y||0)-1})},d.status=function(e,t,i,n,o,r,s,a,l){e.strokeStyle="#888",e.fillStyle="#444",e.lineWidth=1,e.fillRect(t,i+7,n,1),e.beginPath(),e.moveTo(t,i+7-o*f.clamp(.4*l(0),-2,2));for(var c=0;c<n;c+=1)e.lineTo(t+c,i+7-(c<r?o*f.clamp(.4*l(c),-2,2):0));e.stroke(),e.fillStyle="hsl("+f.clamp(25+95*a,0,120)+",100%,60%)",e.fillRect(t,i-7,4,4),e.font="12px Arial",e.textBaseline="middle",e.textAlign="right",e.fillStyle="#eee",e.fillText(s,t+n,i-5)},d.constraints=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.render.visible&&n.pointA&&n.pointB){var o,r,s=n.bodyA,a=n.bodyB;if(o=s?g.add(s.position,n.pointA):n.pointA,"pin"===n.render.type)t.beginPath(),t.arc(o.x,o.y,3,0,2*Math.PI),t.closePath();else{if(r=a?g.add(a.position,n.pointB):n.pointB,t.beginPath(),t.moveTo(o.x,o.y),"spring"===n.render.type)for(var l,c=g.sub(r,o),u=g.perp(g.normalise(c)),d=Math.ceil(f.clamp(n.length/5,12,20)),p=1;p<d;p+=1)l=p%2==0?1:-1,t.lineTo(o.x+c.x*(p/d)+u.x*l*4,o.y+c.y*(p/d)+u.y*l*4);t.lineTo(r.x,r.y)}n.render.lineWidth&&(t.lineWidth=n.render.lineWidth,t.strokeStyle=n.render.strokeStyle,t.stroke()),n.render.anchors&&(t.fillStyle=n.render.strokeStyle,t.beginPath(),t.arc(o.x,o.y,3,0,2*Math.PI),t.arc(r.x,r.y,3,0,2*Math.PI),t.closePath(),t.fill())}}},d.bodies=function(e,t,i){e.engine;var n,o,r,s,a=e.options,l=a.showInternalEdges||!a.wireframes;for(r=0;r<t.length;r++)if((n=t[r]).render.visible){for(s=+(n.parts.length>1);s<n.parts.length;s++)if((o=n.parts[s]).render.visible){if(a.showSleeping&&n.isSleeping?i.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(i.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!a.wireframes){var u=o.render.sprite,d=c(e,u.texture);i.translate(o.position.x,o.position.y),i.rotate(o.angle),i.drawImage(d,-(d.width*u.xOffset)*u.xScale,-(d.height*u.yOffset)*u.yScale,d.width*u.xScale,d.height*u.yScale),i.rotate(-o.angle),i.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)i.beginPath(),i.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{i.beginPath(),i.moveTo(o.vertices[0].x,o.vertices[0].y);for(var p=1;p<o.vertices.length;p++)!o.vertices[p-1].isInternal||l?i.lineTo(o.vertices[p].x,o.vertices[p].y):i.moveTo(o.vertices[p].x,o.vertices[p].y),o.vertices[p].isInternal&&!l&&i.moveTo(o.vertices[(p+1)%o.vertices.length].x,o.vertices[(p+1)%o.vertices.length].y);i.lineTo(o.vertices[0].x,o.vertices[0].y),i.closePath()}a.wireframes?(i.lineWidth=1,i.strokeStyle=e.options.wireframeStrokeStyle,i.stroke()):(i.fillStyle=o.render.fillStyle,o.render.lineWidth&&(i.lineWidth=o.render.lineWidth,i.strokeStyle=o.render.strokeStyle,i.stroke()),i.fill())}i.globalAlpha=1}}},d.bodyWireframes=function(e,t,i){var n,o,r,s,a,l=e.options.showInternalEdges;for(i.beginPath(),r=0;r<t.length;r++)if((n=t[r]).render.visible)for(a=+(n.parts.length>1);a<n.parts.length;a++){for(o=n.parts[a],i.moveTo(o.vertices[0].x,o.vertices[0].y),s=1;s<o.vertices.length;s++)!o.vertices[s-1].isInternal||l?i.lineTo(o.vertices[s].x,o.vertices[s].y):i.moveTo(o.vertices[s].x,o.vertices[s].y),o.vertices[s].isInternal&&!l&&i.moveTo(o.vertices[(s+1)%o.vertices.length].x,o.vertices[(s+1)%o.vertices.length].y);i.lineTo(o.vertices[0].x,o.vertices[0].y)}i.lineWidth=1,i.strokeStyle=e.options.wireframeStrokeStyle,i.stroke()},d.bodyConvexHulls=function(e,t,i){var n,o,r;for(i.beginPath(),o=0;o<t.length;o++)if((n=t[o]).render.visible&&1!==n.parts.length){for(i.moveTo(n.vertices[0].x,n.vertices[0].y),r=1;r<n.vertices.length;r++)i.lineTo(n.vertices[r].x,n.vertices[r].y);i.lineTo(n.vertices[0].x,n.vertices[0].y)}i.lineWidth=1,i.strokeStyle="rgba(255,255,255,0.2)",i.stroke()},d.vertexNumbers=function(e,t,i){var n,o,r;for(n=0;n<t.length;n++){var s=t[n].parts;for(r=+(s.length>1);r<s.length;r++){var a=s[r];for(o=0;o<a.vertices.length;o++)i.fillStyle="rgba(255,255,255,0.2)",i.fillText(n+"_"+o,a.position.x+(a.vertices[o].x-a.position.x)*.8,a.position.y+(a.vertices[o].y-a.position.y)*.8)}}},d.mousePosition=function(e,t,i){i.fillStyle="rgba(255,255,255,0.8)",i.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},d.bodyBounds=function(e,t,i){e.engine;var n=e.options;i.beginPath();for(var o=0;o<t.length;o++)if(t[o].render.visible)for(var r=t[o].parts,s=+(r.length>1);s<r.length;s++){var a=r[s];i.rect(a.bounds.min.x,a.bounds.min.y,a.bounds.max.x-a.bounds.min.x,a.bounds.max.y-a.bounds.min.y)}n.wireframes?i.strokeStyle="rgba(255,255,255,0.08)":i.strokeStyle="rgba(0,0,0,0.1)",i.lineWidth=1,i.stroke()},d.bodyAxes=function(e,t,i){e.engine;var n,o,r,s,a=e.options;for(i.beginPath(),o=0;o<t.length;o++){var l=t[o],c=l.parts;if(l.render.visible)if(a.showAxes)for(r=+(c.length>1);r<c.length;r++)for(s=0,n=c[r];s<n.axes.length;s++){var u=n.axes[s];i.moveTo(n.position.x,n.position.y),i.lineTo(n.position.x+20*u.x,n.position.y+20*u.y)}else for(r=+(c.length>1);r<c.length;r++)for(s=0,n=c[r];s<n.axes.length;s++)i.moveTo(n.position.x,n.position.y),i.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2)}a.wireframes?(i.strokeStyle="indianred",i.lineWidth=1):(i.strokeStyle="rgba(255, 255, 255, 0.4)",i.globalCompositeOperation="overlay",i.lineWidth=2),i.stroke(),i.globalCompositeOperation="source-over"},d.bodyPositions=function(e,t,i){e.engine;var n,o,r,s,a=e.options;for(i.beginPath(),r=0;r<t.length;r++)if((n=t[r]).render.visible)for(s=0;s<n.parts.length;s++)o=n.parts[s],i.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),i.closePath();for(a.wireframes?i.fillStyle="indianred":i.fillStyle="rgba(0,0,0,0.5)",i.fill(),i.beginPath(),r=0;r<t.length;r++)(n=t[r]).render.visible&&(i.arc(n.positionPrev.x,n.positionPrev.y,2,0,2*Math.PI,!1),i.closePath());i.fillStyle="rgba(255,165,0,0.8)",i.fill()},d.bodyVelocity=function(e,t,i){i.beginPath();for(var n=0;n<t.length;n++){var o=t[n];if(o.render.visible){var r=p.getVelocity(o);i.moveTo(o.position.x,o.position.y),i.lineTo(o.position.x+r.x,o.position.y+r.y)}}i.lineWidth=3,i.strokeStyle="cornflowerblue",i.stroke()},d.bodyIds=function(e,t,i){var n,o;for(n=0;n<t.length;n++)if(t[n].render.visible){var r=t[n].parts;for(o=+(r.length>1);o<r.length;o++){var s=r[o];i.font="12px Arial",i.fillStyle="rgba(255,255,255,0.5)",i.fillText(s.id,s.position.x+10,s.position.y-10)}}},d.collisions=function(e,t,i){var n,o,r,s,a=e.options;for(i.beginPath(),r=0;r<t.length;r++)if((n=t[r]).isActive)for(s=0,o=n.collision;s<n.contactCount;s++){var l=n.contacts[s].vertex;i.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(a.wireframes?i.fillStyle="rgba(255,255,255,0.7)":i.fillStyle="orange",i.fill(),i.beginPath(),r=0;r<t.length;r++)if((n=t[r]).isActive&&(o=n.collision,n.contactCount>0)){var c=n.contacts[0].vertex.x,u=n.contacts[0].vertex.y;2===n.contactCount&&(c=(n.contacts[0].vertex.x+n.contacts[1].vertex.x)/2,u=(n.contacts[0].vertex.y+n.contacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||!0===o.bodyA.isStatic?i.moveTo(c-8*o.normal.x,u-8*o.normal.y):i.moveTo(c+8*o.normal.x,u+8*o.normal.y),i.lineTo(c,u)}a.wireframes?i.strokeStyle="rgba(255,165,0,0.7)":i.strokeStyle="orange",i.lineWidth=1,i.stroke()},d.separations=function(e,t,i){var n,o,r,s,a,l=e.options;for(i.beginPath(),a=0;a<t.length;a++)if((n=t[a]).isActive){r=(o=n.collision).bodyA;var c=1;(s=o.bodyB).isStatic||r.isStatic||(c=.5),s.isStatic&&(c=0),i.moveTo(s.position.x,s.position.y),i.lineTo(s.position.x-o.penetration.x*c,s.position.y-o.penetration.y*c),c=1,s.isStatic||r.isStatic||(c=.5),r.isStatic&&(c=0),i.moveTo(r.position.x,r.position.y),i.lineTo(r.position.x+o.penetration.x*c,r.position.y+o.penetration.y*c)}l.wireframes?i.strokeStyle="rgba(255,165,0,0.5)":i.strokeStyle="orange",i.stroke()},d.inspector=function(e,t){e.engine;var i,n=e.selected,o=e.render,r=o.options;if(r.hasBounds){var s=o.bounds.max.x-o.bounds.min.x,a=o.bounds.max.y-o.bounds.min.y,l=s/o.options.width,c=a/o.options.height;t.scale(1/l,1/c),t.translate(-o.bounds.min.x,-o.bounds.min.y)}for(var u=0;u<n.length;u++){var d=n[u].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),d.type){case"body":i=d.bounds,t.beginPath(),t.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var p=d.pointA;d.bodyA&&(p=d.pointB),t.beginPath(),t.arc(p.x,p.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",i=e.selectBounds,t.beginPath(),t.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),r.hasBounds&&t.setTransform(1,0,0,1,0,0)},r=function(e,t){var i=e.engine,n=e.timing,o=n.historySize,r=i.timing.timestamp;n.delta=t-n.lastTime||d._goodDelta,n.lastTime=t,n.timestampElapsed=r-n.lastTimestamp||0,n.lastTimestamp=r,n.deltaHistory.unshift(n.delta),n.deltaHistory.length=Math.min(n.deltaHistory.length,o),n.engineDeltaHistory.unshift(i.timing.lastDelta),n.engineDeltaHistory.length=Math.min(n.engineDeltaHistory.length,o),n.timestampElapsedHistory.unshift(n.timestampElapsed),n.timestampElapsedHistory.length=Math.min(n.timestampElapsedHistory.length,o),n.engineUpdatesHistory.unshift(i.timing.lastUpdatesPerFrame),n.engineUpdatesHistory.length=Math.min(n.engineUpdatesHistory.length,o),n.engineElapsedHistory.unshift(i.timing.lastElapsed),n.engineElapsedHistory.length=Math.min(n.engineElapsedHistory.length,o),n.elapsedHistory.unshift(n.lastElapsed),n.elapsedHistory.length=Math.min(n.elapsedHistory.length,o)},s=function(e){for(var t=0,i=0;i<e.length;i+=1)t+=e[i];return t/e.length||0},a=function(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},l=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},c=function(e,t){var i=e.textures[t];return i||((i=e.textures[t]=new Image).src=t),i},u=function(e,t){var i=t;/(jpg|gif|png)$/.test(t)&&(i="url("+t+")"),e.canvas.style.background=i,e.canvas.style.backgroundSize="contain",e.currentBackground=t}},function(e,t,i){var n,o={};e.exports=o;var r=i(5),s=i(17),a=i(0);o._maxFrameDelta=1e3/15,o._frameDeltaFallback=1e3/60,o._timeBufferMargin=1.5,o._elapsedNextEstimate=1,o._smoothingLowerBound=.1,o._smoothingUpperBound=.9,o.create=function(e){var t=a.extend({delta:1e3/60,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:1e3/30,lastUpdatesDeferred:0,enabled:!0},e);return t.fps=0,t},o.run=function(e,t){return e.timeBuffer=o._frameDeltaFallback,!function i(n){e.frameRequestId=o._onNextFrame(e,i),n&&e.enabled&&o.tick(e,t,n)}(),e},o.tick=function(e,t,i){var l=a.now(),c=e.delta,u=0,d=i-e.timeLastTick;if((!d||!e.timeLastTick||d>Math.max(o._maxFrameDelta,e.maxFrameTime))&&(d=e.frameDelta||o._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(d),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var p=e.frameDeltaHistory.slice(0).sort();d=n(e.frameDeltaHistory.slice(p.length*o._smoothingLowerBound,p.length*o._smoothingUpperBound))||d}e.frameDeltaSnapping&&(d=1e3/Math.round(1e3/d)),e.frameDelta=d,e.timeLastTick=i,e.timeBuffer+=e.frameDelta,e.timeBuffer=a.clamp(e.timeBuffer,0,e.frameDelta+c*o._timeBufferMargin),e.lastUpdatesDeferred=0;var f=e.maxUpdates||Math.ceil(e.maxFrameTime/c),h={timestamp:t.timing.timestamp};r.trigger(e,"beforeTick",h),r.trigger(e,"tick",h);for(var m=a.now();c>0&&e.timeBuffer>=c*o._timeBufferMargin;){r.trigger(e,"beforeUpdate",h),s.update(t,c),r.trigger(e,"afterUpdate",h),e.timeBuffer-=c,u+=1;var _=a.now()-l,g=a.now()-m,b=_+o._elapsedNextEstimate*g/u;if(u>=f||b>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/c-o._timeBufferMargin));break}}t.timing.lastUpdatesPerFrame=u,r.trigger(e,"afterTick",h),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/c)>f?a.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&a.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),void 0!==e.isFixed&&a.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&a.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),0!==e.fps&&a.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},o.stop=function(e){o._cancelNextFrame(e)},o._onNextFrame=function(e,t){if("undefined"!=typeof window&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(t);else throw Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},o._cancelNextFrame=function(e){if("undefined"!=typeof window&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw Error("Matter.Runner: missing required global window.cancelAnimationFrame.")},n=function(e){for(var t=0,i=e.length,n=0;n<i;n+=1)t+=e[n];return t/i||0}},function(e,t,i){var n={};e.exports=n;var o=i(8),r=i(0).deprecated;n.collides=function(e,t){return o.collides(e,t)},r(n,"collides","SAT.collides ➤ replaced by Collision.collides")},function(e,t,i){var n={};e.exports=n,i(1);var o=i(0);n.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,r,s,a,l,c,u,d,p,f,h,m=[],_=0,g=0,b=0;t=t||15;var v=function(e,t,i){var n=i%2==1&&i>1;if(!p||e!=p.x||t!=p.y){p&&n?(f=p.x,h=p.y):(f=0,h=0);var o={x:f+e,y:h+t};(n||!p)&&(p=o),m.push(o),g=f+e,b=h+t}},y=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":g=e.x,b=e.y;break;case"H":g=e.x;break;case"V":b=e.y}v(g,b,e.pathSegType)}};for(n._svgPathToAbsolute(e),s=e.getTotalLength(),c=[],i=0;i<e.pathSegList.numberOfItems;i+=1)c.push(e.pathSegList.getItem(i));for(u=c.concat();_<s;){if((l=c[e.getPathSegAtLength(_)])!=d){for(;u.length&&u[0]!=l;)y(u.shift());d=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v((a=e.getPointAtLength(_)).x,a.y,0)}_+=t}for(i=0,r=u.length;i<r;++i)y(u[i]);return m},n._svgPathToAbsolute=function(e){for(var t,i,n,o,r,s,a=e.pathSegList,l=0,c=0,u=a.numberOfItems,d=0;d<u;++d){var p=a.getItem(d),f=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in p&&(l=p.x),"y"in p&&(c=p.y);else switch("x1"in p&&(n=l+p.x1),"x2"in p&&(r=l+p.x2),"y1"in p&&(o=c+p.y1),"y2"in p&&(s=c+p.y2),"x"in p&&(l+=p.x),"y"in p&&(c+=p.y),f){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(l,c),d);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(l,c),d);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,n,o,r,s),d);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,r,s),d);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,n,o),d);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),d);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(l,c,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),d);break;case"z":case"Z":l=t,c=i}("M"==f||"m"==f)&&(t=l,i=c)}}},function(e,t,i){var n={};e.exports=n;var o=i(6);i(0),n.create=o.create,n.add=o.add,n.remove=o.remove,n.clear=o.clear,n.addComposite=o.addComposite,n.addBody=o.addBody,n.addConstraint=o.addConstraint}],t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,(function(t){return e[t]}).bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=20)}();const z=new class{constructor(){this.particles=[],this.canvas=document.getElementById("particle-canvas"),this.setupCanvas(),this.engine=G.Engine.create({gravity:{x:0,y:0,scale:0},enableSleeping:!1}),this.world=this.engine.world,this.render=G.Render.create({canvas:this.canvas,engine:this.engine,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1,background:"transparent"}}),G.Events.on(this.engine,"collisionStart",this.handleCollision.bind(this)),G.Render.run(this.render),G.Engine.run(this.engine)}setupCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.pointerEvents="none"}addParticle(e,t,i,n,o,r){let s=Math.min(Math.max(Math.abs(r),.5),2),a=G.Bodies.circle(e,t,3*s,{friction:0,frictionAir:.02,restitution:.8,render:{fillStyle:this.getColorFromZScore(o)}}),l=Math.min(Math.max(Math.abs(r),.5),2),c={x:Math.cos(n*Math.PI/180)*i*.001*l,y:Math.sin(n*Math.PI/180)*i*.001*l};G.Body.setVelocity(a,c),this.particles.push({body:a,windSpeed:i,windDirection:n,temperature:o,windSpeedZScore:r}),G.World.add(this.world,a)}handleCollision(e){e.pairs.forEach(e=>{let t=this.particles.find(t=>t.body.id===e.bodyA.id),i=this.particles.find(t=>t.body.id===e.bodyB.id);if(t&&i){let n=Math.min(Math.max(.1*((Math.abs(t.windSpeedZScore)+Math.abs(i.windSpeedZScore))/2),.05),.2);G.Body.setVelocity(e.bodyA,{x:e.bodyA.velocity.x*(1+n),y:e.bodyA.velocity.y*(1+n)}),G.Body.setVelocity(e.bodyB,{x:e.bodyB.velocity.x*(1+n),y:e.bodyB.velocity.y*(1+n)})}})}getColorFromZScore(e){let t=Math.min(Math.max(Math.abs(e),.5),2.5)/2.5,i=.6+.4*t;if(e>=0){let e=Math.round(255*(1-t));return`rgba(255, ${e}, ${e}, ${i})`}{let e=Math.round(255*(1-t));return`rgba(${e}, ${e}, 255, ${i})`}}update(){this.particles.forEach(e=>{let t=e.windDirection*Math.PI/180,i={x:Math.cos(t)*e.windSpeed*1e-4,y:Math.sin(t)*e.windSpeed*1e-4};G.Body.applyForce(e.body,e.body.position,i);let n=e.body.position,o=document.querySelector("#world-map");if(o){let t=o.getBoundingClientRect(),i=this.handleTorusWrapping(n.x,n.y,t.width,t.height);(i.x!==n.x||i.y!==n.y)&&G.Body.setPosition(e.body,i)}})}clear(){this.particles.forEach(e=>{G.World.remove(this.world,e.body)}),this.particles=[]}handleTorusWrapping(e,t,i,n){let o=e,r=t;return e<0?o=i+e%i:e>i&&(o=e%i),{x:o,y:Math.max(0,Math.min(n,t))}}},Z="weatherDataCache";let X=[],Q=null;function $(){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname}function Y(e){let t=e.map(e=>e.current.temperature2m),i=e.map(e=>e.current.windSpeed10m),n=t.reduce((e,t)=>e+t,0)/t.length,o=i.reduce((e,t)=>e+t,0)/i.length,r=t.map(e=>Math.pow(e-n,2)),s=i.map(e=>Math.pow(e-o,2));return{tempMean:n,tempStd:Math.sqrt(r.reduce((e,t)=>e+t,0)/t.length),windSpeedMean:o,windSpeedStd:Math.sqrt(s.reduce((e,t)=>e+t,0)/i.length)}}async function J(e,t,i){let n=e.length,o=Math.ceil(n/i);for(let r=0;r<o;r++){let s=r*i,a=Math.min(s+i,n),l=e.slice(s,a),c=t.slice(s,a);await K(l,c),r<o-1&&await new Promise(e=>setTimeout(e,1e4))}$()&&localStorage.setItem(Z,JSON.stringify({timestamp:Date.now(),data:X}))}async function K(e,t){let i=await (0,g.fetchWeatherApi)("https://api.open-meteo.com/v1/forecast",{latitude:e,longitude:t,current:["temperature_2m","wind_speed_10m","wind_direction_10m"],models:"best_match"}),n=[];for(let e=0;e<i.length;e++){let t=i[e],o=t.timezoneAbbreviation(),r=t.latitude(),s=t.longitude(),a=t.current(),l=a.variables(0).value(),c={current:{temperature2m:l,windSpeed10m:a.variables(1).value(),windDirection10m:a.variables(2).value()},location:{latitude:r,longitude:s,timezoneAbbreviation:o}};n.push(c),X.push(c)}!Q&&X.length>0&&(Q=Y(X)),n.forEach(e=>{let t=ee(e.location.latitude,e.location.longitude);if(t&&Q){let i=(e.current.temperature2m-Q.tempMean)/Q.tempStd,n=(e.current.windSpeed10m-Q.windSpeedMean)/Q.windSpeedStd;e.current.windDirection10m,e.current.windSpeed10m,e.current.windSpeed10m,z.addParticle(t.x,t.y,e.current.windSpeed10m,e.current.windDirection10m,i,n)}})}function ee(e,t){if(!document.querySelector(".map-container"))return null;let i=document.querySelector("#world-map");if(!i)return null;let n=i.getBoundingClientRect(),o=W(n.width,n.height).geoToPixel(e,t);return{x:o.x,y:n.height-o.y}}window.addEventListener("resize",function(){document.querySelectorAll(".wind-arrow").forEach(e=>e.remove()),clearTimeout(window.resizeTimer),window.resizeTimer=setTimeout(function(){window.location.reload()},200)}),document.addEventListener("DOMContentLoaded",function(){let{latitudes:e,longitudes:t}=U(4e3);$()&&function(){let e=localStorage.getItem(Z);if(!e)return!1;try{let{timestamp:t}=JSON.parse(e);return!(Date.now()-t>864e5)}catch(e){return console.error("Error parsing cached data:",e),!1}}()?function(){try{let e=localStorage.getItem(Z);if(!e)return;let{data:t}=JSON.parse(e);Q=Y(t),t.forEach(e=>{let{location:t,current:i}=e,n=ee(t.latitude,t.longitude);if(n&&Q){let e=(i.temperature2m-Q.tempMean)/Q.tempStd,t=(i.windSpeed10m-Q.windSpeedMean)/Q.windSpeedStd;z.addParticle(n.x,n.y,i.windSpeed10m,i.windDirection10m,e,t)}})}catch(e){console.error("Error processing cached data:",e)}}():(X=[],J(e,t,100)),function e(){z.update(),requestAnimationFrame(e)}()}),window.clearWeatherCache=function(){try{return localStorage.removeItem(Z),console.log("Weather data cache cleared successfully"),!0}catch(e){return console.error("Error clearing weather data cache:",e),!1}};
//# sourceMappingURL=public.029e9fcc.js.map
